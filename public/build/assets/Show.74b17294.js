import{L as x}from"./Admin.5699026e.js";import{P as S}from"./Pagination.c24d959f.js";import{H as E,L as F,k as b,r as R,a as v,o as r,c as d,b as f,w as g,d as e,t as i,e as T,f as m,v as h,n as N,K as C,F as _,j as B,l as A,g as p,h as w,s as I,i as L}from"./app.56f58a85.js";import{E as V}from"./Editor.4085899b.js";import{a as U}from"./index.d54af413.js";import{S as c}from"./sweetalert2.all.15407acb.js";import{_ as j}from"./_plugin-vue_export-helper.cdc0426e.js";const D={layout:x,components:{Head:E,Link:F,Editor:V,Pagination:S},props:{errors:Object,event:Object,details:Object},data(){return{activeTab:"participant",showRoleModal:!1,selectedRole:"",selectedParticipantId:null,showEnrollModal:!1,searching:!1,enrollForm:{nip:"",member_id:"",name:"",title:"Peserta"}}},methods:{setActiveTab(o){this.activeTab=o},openRoleModal(o){this.selectedRole=o.title,this.selectedParticipantId=o.id,this.showRoleModal=!0},closeRoleModal(){this.showRoleModal=!1,this.selectedRole="",this.selectedParticipantId=null},updateRole(o,t){b.Inertia.post(`/admin/events/${o}/updaterole`,{title:t},{onSuccess:()=>{this.closeRoleModal(),c.fire("Sukses","Peran peserta diperbarui!","success")}})},absenAll(){c.fire({title:"Yakin ingin absen semua peserta?",icon:"question",showCancelButton:!0,confirmButtonText:"Ya, absen semua"}).then(o=>{o.isConfirmed&&b.Inertia.get(`/admin/events/${this.event.id}/absenall`,{},{onSuccess:()=>{c.fire("Sukses","Semua peserta telah diabsen!","success")}})})},async searchMemberByNip(){if(!(this.enrollForm.nip.length<5)){this.searching=!0;try{const o=await U.get(`/admin/members/find/${this.enrollForm.nip}`);o.data.success?(this.enrollForm.member_id=o.data.data.id,this.enrollForm.name=o.data.data.name):(c.fire("Error","Member tidak ditemukan!","error"),this.enrollForm.name="",this.enrollForm.member_id="")}catch(o){console.error(o)}finally{this.searching=!1}}},submitEnroll(){b.Inertia.post(`/admin/events/${this.event.id}/enroll`,{member_id:this.enrollForm.member_id,title:this.enrollForm.title},{onSuccess:()=>{this.closeEnrollModal(),c.fire("Sukses","Peserta berhasil ditambahkan!","success")},onError:o=>{c.fire("Gagal",o.member_id||"Terjadi kesalahan","error")}})},closeEnrollModal(){this.showEnrollModal=!1,this.enrollForm={nip:"",member_id:"",name:"",title:"Peserta"}}},setup(o){const t=R(new URL(document.location).searchParams.get("q"));return{getDocumentUrl:l=>`/storage/${l}`,search:t,handleSearch:()=>{b.Inertia.get(`/admin/events/${o.event.id}`,{q:t.value})}}}},H={class:"container padding px-5"},K={class:"row mt-1"},q={class:"col-md-12"},J={class:"card border-0 shadow"},O={class:"card-body"},Y={class:"row"},z={class:"col-md-12"},G={class:"row py-4"},Q={class:"col-md-2 col-12 mb-2"},W={class:"row py-4 ms-5"},X={class:"col-md-9 mb-2"},Z=["innerHTML"],$={class:"col-md-9 mb-2"},ee={class:"col-md-9 mb-2"},te={class:"col-md-9 mb-2"},se={class:"col-md-9 mb-2"},le={class:"col-md-9 mb-2"},oe={class:"row mt-4"},ae={class:"col-md-12"},ne={class:"card border-0 shadow"},ie={class:"card-body"},re={class:"col-md-6 col-12 mb-2 mt-4"},de={class:"input-group"},me={class:"nav nav-tabs"},ce={class:"nav-item"},ue={class:"nav-item ms-4"},be={class:"nav-item ms-2"},pe={class:"table-responsive",id:"sub"},ve={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},he={class:"fw-bold text-center"},ke=["onClick"],fe={class:"text-center"},ge={key:0,class:"modal-backdrop"},_e={class:"modal-content-custom"},we={class:"form-group mb-3"},ye={key:0,class:"text-primary"},Pe={class:"form-group mb-3"},Me={class:"form-group mb-3"},xe={class:"mt-4"},Se=["disabled"],Ee={key:1,class:"modal-backdrop"},Fe={class:"modal-content-custom"};function Re(o,t,n,u,l,a){const y=v("Head"),P=v("Link"),M=v("Pagination");return r(),d(_,null,[f(y,null,{default:g(()=>[...t[14]||(t[14]=[e("title",null,"Administrator",-1)])]),_:1}),e("div",H,[e("div",K,[e("div",q,[e("div",J,[e("div",O,[e("div",Y,[e("div",z,[e("div",G,[e("div",Q,[f(P,{href:"/admin/events",class:"btn btn-md btn-primary border-0 shadow w-100",type:"button"},{default:g(()=>[...t[15]||(t[15]=[e("i",{class:"fa fa-arrow-left"},null,-1),L(" Kembali",-1)])]),_:1})])])])]),t[23]||(t[23]=e("h3",{class:"text-center"},"Detail Event",-1)),e("div",W,[t[16]||(t[16]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Judul ")],-1)),e("div",X,[e("span",null," : "+i(n.event.title),1)]),t[17]||(t[17]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Deskripsi ")],-1)),e("div",{innerHTML:n.event.body,style:{"text-align":"justify","text-justify":""},class:"col-md-9 mb-2"},null,8,Z),t[18]||(t[18]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Tanggal Pelaksanaan ")],-1)),e("div",$,[e("span",null," : "+i(n.event.date),1)]),t[19]||(t[19]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Tutup Pendaftaran ")],-1)),e("div",ee,[e("span",null," : "+i(n.event.enddate),1)]),t[20]||(t[20]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Kapasitas Peserta ")],-1)),e("div",te,[e("span",null," : "+i(n.event.participant),1)]),t[21]||(t[21]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Tempat Pelaksanaan ")],-1)),e("div",se,[e("span",null," : "+i(n.event.place),1)]),t[22]||(t[22]=e("div",{class:"col-md-2"},[e("span",{class:"text-black"}," Link ")],-1)),e("div",le,[e("span",null," : "+i(n.event.link),1)])])])])])]),e("div",oe,[e("div",ae,[e("div",ne,[e("div",ie,[t[27]||(t[27]=e("h3",{class:"text-center"},"Detail Peserta",-1)),e("div",re,[e("form",{onSubmit:t[1]||(t[1]=T((...s)=>u.handleSearch&&u.handleSearch(...s),["prevent"]))},[e("div",de,[m(e("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":t[0]||(t[0]=s=>u.search=s),placeholder:"masukkan kata kunci dan enter..."},null,512),[[h,u.search]]),t[24]||(t[24]=e("span",{class:"input-group-text border-0 shadow"},[e("i",{class:"fa fa-search"})],-1))])],32)]),e("ul",me,[e("li",ce,[e("a",{class:N(["nav-link",{active:l.activeTab==="participant"}]),onClick:t[2]||(t[2]=s=>a.setActiveTab("participant"))},"Participant",2)]),e("li",ue,[e("button",{class:"btn btn-success w-100",onClick:t[3]||(t[3]=(...s)=>a.absenAll&&a.absenAll(...s))},"Absen All")]),e("li",be,[e("button",{class:"btn btn-primary w-100",onClick:t[4]||(t[4]=s=>l.showEnrollModal=!0)},"Tambah Peserta")])]),m(e("div",pe,[e("table",ve,[t[25]||(t[25]=e("thead",{class:"thead-dark"},[e("tr",{class:"border-0 text-center"},[e("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),e("th",{class:"border-0"},"Nama"),e("th",{class:"border-0"},"Instansi"),e("th",{class:"border-0"},"Sebagai"),e("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Status ")])],-1)),t[26]||(t[26]=e("div",{class:"mt-2"},null,-1)),e("tbody",null,[(r(!0),d(_,null,B(n.details.data,(s,k)=>(r(),d("tr",{key:k},[e("td",he,i(++k+(n.details.current_page-1)*n.details.per_page),1),e("td",null,i(s.member.name),1),e("td",null,i(s.member.agency),1),e("td",{onClick:Te=>a.openRoleModal(s),style:{cursor:"pointer"},title:"Klik untuk ubah peran"},i(s.title),9,ke),e("td",fe,i(s.status),1)]))),128))])])],512),[[C,l.activeTab==="participant"]]),l.activeTab==="participant"?(r(),A(M,{key:0,links:n.details.links,align:"end"},null,8,["links"])):p("",!0)])])])])]),l.showEnrollModal?(r(),d("div",ge,[e("div",_e,[t[32]||(t[32]=e("h5",null,"Tambah Peserta Ke Event",-1)),t[33]||(t[33]=e("hr",null,null,-1)),e("div",we,[t[28]||(t[28]=e("label",null,"Masukkan NIP",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>l.enrollForm.nip=s),class:"form-control",onChange:t[6]||(t[6]=(...s)=>a.searchMemberByNip&&a.searchMemberByNip(...s)),placeholder:"Ketik NIP lalu tekan enter/tab"},null,544),[[h,l.enrollForm.nip]]),l.searching?(r(),d("small",ye,"Mencari member...")):p("",!0)]),e("div",Pe,[t[29]||(t[29]=e("label",null,"Nama Member",-1)),m(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=s=>l.enrollForm.name=s),class:"form-control",disabled:"",placeholder:"Nama akan muncul otomatis"},null,512),[[h,l.enrollForm.name]])]),e("div",Me,[t[31]||(t[31]=e("label",null,"Sebagai (Title)",-1)),m(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.enrollForm.title=s),class:"form-control"},[...t[30]||(t[30]=[I('<option value="Penanggung Jawab Panitia">Penanggung Jawab</option><option value="Sekretaris Panitia">Sekretaris</option><option value="Bendahara Panitia">Bendahara</option><option value="Narasumber">Narasumber</option><option value="Anggota Panitia">Anggota Panitia</option><option value="Moderator Panitia">Moderator</option>',6)])],512),[[w,l.enrollForm.title]])]),e("div",xe,[e("button",{class:"btn btn-primary",disabled:!l.enrollForm.member_id,onClick:t[9]||(t[9]=(...s)=>a.submitEnroll&&a.submitEnroll(...s))},"Simpan",8,Se),e("button",{class:"btn btn-secondary ms-2",onClick:t[10]||(t[10]=(...s)=>a.closeEnrollModal&&a.closeEnrollModal(...s))},"Batal")])])])):p("",!0),l.showRoleModal?(r(),d("div",Ee,[e("div",Fe,[t[35]||(t[35]=e("h5",null,"Edit Peran Peserta",-1)),m(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.selectedRole=s),class:"form-control mb-3"},[...t[34]||(t[34]=[e("option",{value:"Peserta"},"Peserta",-1),e("option",{value:"Moderator"},"Moderator",-1),e("option",{value:"Panitia"},"Panitia",-1),e("option",{value:"Narasumber"},"Narasumber",-1)])],512),[[w,l.selectedRole]]),e("button",{class:"btn btn-sm btn-success",onClick:t[12]||(t[12]=s=>a.updateRole(l.selectedParticipantId,l.selectedRole))},"Simpan"),e("button",{class:"btn btn-sm btn-secondary ms-2",onClick:t[13]||(t[13]=(...s)=>a.closeRoleModal&&a.closeRoleModal(...s))},"Batal")])])):p("",!0)],64)}const Ue=j(D,[["render",Re]]);export{Ue as default};
