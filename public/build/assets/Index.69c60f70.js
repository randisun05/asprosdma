import{L as j}from"./Admin.f4fbbf1d.js";import{P as I}from"./Pagination.fe26d4c4.js";import{H as N,L as R,r as U,B as V,q as L,x as D,a as w,o,c as i,b as m,w as p,d as e,i as h,s as E,e as P,f as y,v as T,u as B,g as c,F as S,j as q,k as f,t as r}from"./app.8cf94ea6.js";import{S as l}from"./sweetalert2.all.d0470cdd.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:j,components:{Head:N,Link:R,Pagination:I},props:{errors:Object,registers:Object},setup(x){const t=U(new URL(document.location).searchParams.get("q")),{registers:d}=V(x),a=L({registration_ids:[],allSelected:!1}),C=()=>{a.allSelected&&d.value&&Array.isArray(d.value.data)?a.registration_ids=d.value.data.map(n=>n.id):a.registration_ids=[]},A=D(()=>d.value.data.every(n=>n.status==="approved"||n.status==="rejected")),k=()=>{f.Inertia.get("/admin/registration",{q:t.value})},u=n=>`/storage/${n}`,_=n=>`/storage/${n}`,s=n=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan menyetujui usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(b=>{b.isConfirmed&&(f.Inertia.get(`/admin/registration/${n}/approve`),l.fire({title:"Success!",text:"Status Approved!.",icon:"success",timer:5e3,showConfirmButton:!1}))})},g=()=>{if(a.registration_ids.length===0){l.fire("Error","No registrations selected.","error");return}l.fire({title:"Apakah Anda yakin?",text:"Anda akan menyetujui grup usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(n=>{n.isConfirmed&&(f.Inertia.get("/admin/registration/group/approve",{registration_ids:a.registration_ids}),l.fire({title:"Success!",text:"Status Approved!.",icon:"success",timer:5e3,showConfirmButton:!1}))})};return console.log("Approving these IDs:",a.registration_ids),{search:t,handleSearch:k,getDocumentUrl:u,handleReject:n=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan menolak usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Reject it!"}).then(b=>{b.isConfirmed&&(f.Inertia.get(`/admin/registration/${n}/reject`),l.fire({title:"Success!",text:"Status Rejected!.",icon:"success",timer:5e3,showConfirmButton:!1}))})},handleApprove:s,handleConfirm:n=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan mengkonfirmasi ulang usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirm it!"}).then(b=>{b.isConfirmed&&(f.Inertia.get(`/admin/registration/${n}/confirm`),l.fire({title:"Success!",text:"Status Conirmed!.",icon:"success",timer:5e3,showConfirmButton:!1}))})},getImageUrl:_,paidExport:()=>{f.Inertia.get("/admin/registration/paid/export")},selectAll:C,form:a,handleApproveGroup:g,allApprovedOrRejected:A}}},O={class:"container-fluid padding px-5"},Y={class:"row"},M={class:"col-md-12"},F={class:"row"},J={class:"col-md-1 col-12 mb-2"},K={class:"col-md-1 col-12 mb-2"},z={class:"col-md-1 col-12 mb-2"},Q={class:"col-md-1 col-12 mb-2"},W={class:"col-md-6 col-12 mb-2"},X={class:"input-group"},Z={class:"row mt-1"},$={class:"col-md-12"},tt={class:"card border-0 shadow"},et={class:"card-body"},st={class:"table-responsive"},at={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},nt={class:"thead-dark"},ot={class:"border-0 text-center"},it={class:"border-0 rounded-start",style:{width:"5%"}},rt={class:"text-center"},dt=["id","value","checked"],lt={class:"fw-bold text-center"},ct={class:"text"},ut={class:"badge bg-secondary"},mt={class:"text-center"},ft=["href"],bt={class:"text-center"},pt={key:0,class:"badge bg-success"},ht=["href"],gt={key:2,class:"badge bg-danger"},vt=["href"],kt={key:4,class:"badge bg-secondary"},_t={key:5,class:"badge bg-primary"},wt={class:"text-center"},yt=["onClick"],xt=["onClick"];function Ct(x,t,d,a,C,A){const k=w("Head"),u=w("Link"),_=w("Pagination");return o(),i(S,null,[m(k,null,{default:p(()=>[...t[6]||(t[6]=[e("title",null,"Administrator",-1)])]),_:1}),e("div",O,[e("div",Y,[e("div",M,[e("div",F,[e("div",J,[m(u,{href:"/admin/registration/create",class:"btn btn-md btn-primary border-0 shadow w-100",type:"button"},{default:p(()=>[...t[7]||(t[7]=[e("i",{class:"fa fa-plus-circle"},null,-1),h(" Tambah",-1)])]),_:1})]),e("div",K,[m(u,{href:"/admin/registration/import",class:"btn btn-md btn-success border-0 shadow w-100",type:"button"},{default:p(()=>[...t[8]||(t[8]=[e("i",{class:"fa fa-plus-circle"},null,-1),h(" Import",-1)])]),_:1})]),e("div",z,[m(u,{href:"/admin/registration/group",class:"btn btn-md btn-success border-0 shadow w-100",type:"button"},{default:p(()=>[...t[9]||(t[9]=[e("i",{class:"fa fa-plus-circle"},null,-1),h(" Kolektif",-1)])]),_:1})]),e("div",Q,[e("button",{onClick:t[0]||(t[0]=(...s)=>a.handleApproveGroup&&a.handleApproveGroup(...s)),class:"btn btn-sm btn-success border-0 shadow me-2"},[...t[10]||(t[10]=[e("i",{class:"fa fa-check-circle fa-lg me-2","aria-hidden":"true",title:"approve"},null,-1),h("Approve Group",-1)])])]),t[12]||(t[12]=E('<div class="col-md-1 col-12 mb-2"><a href="/admin/registration/paid/export" target="_blank" class="btn btn-warning btn-md border-0 shadow w-100 text-white"><i class="fa fa-download"></i> Export Paid</a></div><div class="col-md-1 col-12 mb-2"><a href="/admin/registration/data/export" target="_blank" class="btn btn-success btn-md border-0 shadow w-100 text-white"><i class="fa fa-download"></i> Export Data</a></div>',2)),e("div",W,[e("form",{onSubmit:t[2]||(t[2]=P((...s)=>a.handleSearch&&a.handleSearch(...s),["prevent"]))},[e("div",X,[y(e("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":t[1]||(t[1]=s=>a.search=s),placeholder:"masukkan kata kunci dan enter..."},null,512),[[T,a.search]]),t[11]||(t[11]=e("span",{class:"input-group-text border-0 shadow"},[e("i",{class:"fa fa-search"})],-1))])],32)])])])]),e("div",Z,[e("div",$,[e("div",tt,[e("div",et,[e("div",st,[e("table",at,[e("thead",nt,[e("tr",ot,[e("th",it,[a.allApprovedOrRejected?c("",!0):y((o(),i("input",{key:0,type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>a.form.allSelected=s),onChange:t[4]||(t[4]=(...s)=>a.selectAll&&a.selectAll(...s))},null,544)),[[B,a.form.allSelected]])]),t[13]||(t[13]=e("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No.",-1)),t[14]||(t[14]=e("th",{class:"border-0"},"NIP",-1)),t[15]||(t[15]=e("th",{class:"border-0"},"Nama",-1)),t[16]||(t[16]=e("th",{class:"border-0"},"Instansi",-1)),t[17]||(t[17]=e("th",{class:"border-0"},"Jenjang Jabatan",-1)),t[18]||(t[18]=e("th",{class:"border-0"},"Email",-1)),t[19]||(t[19]=e("th",{class:"border-0",style:{width:"6%"}},"Dokumen",-1)),t[20]||(t[20]=e("th",{class:"border-0",style:{width:"6%"}},"Status",-1)),t[21]||(t[21]=e("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi",-1))])]),t[25]||(t[25]=e("div",{class:"mt-2"},null,-1)),e("tbody",null,[(o(!0),i(S,null,q(d.registers.data,(s,g)=>(o(),i("tr",{key:g},[e("td",rt,[s.status!=="approved"&&s.status!=="rejected"?y((o(),i("input",{key:0,type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=v=>a.form.registration_ids=v),id:s.id,value:s.id,number:"",checked:a.form.allSelected},null,8,dt)),[[B,a.form.registration_ids]]):c("",!0)]),e("td",lt,r(++g+(d.registers.current_page-1)*d.registers.per_page),1),e("td",null,r(s.nip),1),e("td",null,r(s.name),1),e("td",null,r(s.agency),1),e("td",ct,r(s.position)+" "+r(s.level),1),e("td",null,[h(r(s.email)+" ",1),e("span",ut,r(s.emailstatus),1)]),e("td",mt,[e("a",{href:a.getDocumentUrl(s.document_jab),target:"_blank",class:"badge bg-primary"},"View",8,ft)]),e("td",bt,[s.status==="approved"?(o(),i("span",pt,r(s.status),1)):s.status==="confirm"?(o(),i("span",{key:1,href:a.getImageUrl(s.paid),target:"_blank",class:"badge bg-warning"},r(s.status),9,ht)):s.status==="rejected"?(o(),i("span",gt,r(s.status),1)):c("",!0),s.paid?(o(),i("a",{key:3,href:a.getImageUrl(s.paid),target:"_blank",class:"badge bg-primary"},"paid",8,vt)):s.status==="submission"?(o(),i("span",kt,r(s.status),1)):c("",!0),s.admin?(o(),i("span",_t,r(s.admin),1)):c("",!0)]),e("td",wt,[m(u,{href:`/admin/registration/${s.id}`,class:"btn btn-sm btn-primary border-0 shadow me-2",type:"button"},{default:p(()=>[...t[22]||(t[22]=[e("i",{class:"fa fa-eye fa-lg","aria-hidden":"true",title:"lihat detail"},null,-1)])]),_:1},8,["href"]),s.status!=="approved"?(o(),i("button",{key:0,onClick:v=>a.handleConfirm(s.id),class:"btn btn-sm btn-warning border-0 shadow me-2"},[...t[23]||(t[23]=[e("i",{class:"fa fa-question-circle fa-lg","aria-hidden":"true",title:"confirm"},null,-1)])],8,yt)):c("",!0),s.status!=="approved"&&s.status!=="rejected"?(o(),i("button",{key:1,onClick:v=>a.handleReject(s.id),class:"btn btn-sm btn-danger border-0 shadow me-2"},[...t[24]||(t[24]=[e("i",{class:"fa fa-times-circle fa-lg","aria-hidden":"true",title:"reject"},null,-1)])],8,xt)):c("",!0)])]))),128))])])]),m(_,{links:d.registers.links,align:"end"},null,8,["links"])])])])])])],64)}const Ut=G(H,[["render",Ct]]);export{Ut as default};
