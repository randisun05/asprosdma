import{L as k}from"./Admin.251bc8e8.js";import{G as C,a as x}from"./GenerateQRCode.f1b65726.js";import{P as M}from"./Pagination.cfc720ce.js";import{H as q,L,s as p,r as h,o as r,c as l,e as m,w as f,a as e,i as I,j as S,v as N,F as g,D as R,d as u,f as Q,t as n,l as P,I as V,J as j}from"./app.b8d1a056.js";import"./sweetalert2.all.1a351fa5.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:k,components:{Head:q,Link:L,Pagination:M,GenerateQRCode:C},props:{errors:Object,datas:Object},data(){return{showModal:!1,qrCode:null,text:""}},methods:{async showQrModal(o){try{const t=await x.post("http://192.168.100.168:8002/admin/generate-qr",{text:o},{responseType:"blob"}),d=URL.createObjectURL(t.data);this.qrCode=d,this.showModal=!0}catch(t){console.error("Error generating QR code:",t)}},closeModal(){this.showModal=!1,this.qrCode=null}},setup(){const o=p(new URL(document.location).searchParams.get("q")),t=()=>{P.Inertia.get("/admin/members",{q:o.value})},d=p(!1);return{search:o,handleSearch:t,showModalEmail:d}}},a=o=>(V("data-v-a72de94e"),o=o(),j(),o),U=a(()=>e("title",null,"Administrator",-1)),B={class:"container-fluid padding px-5"},D={class:"row"},E={class:"col-md-12"},O={class:"row"},T={class:"col-md-6 col-12 mb-2"},F={class:"input-group"},G=a(()=>e("span",{class:"input-group-text border-0 shadow"},[e("i",{class:"fa fa-search"})],-1)),J={class:"row mt-1"},z={class:"col-md-12"},K={class:"card border-0 shadow"},W={class:"card-body"},X={class:"table-responsive"},Y={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},Z=a(()=>e("thead",{class:"thead-dark"},[e("tr",{class:"border-0 text-center"},[e("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),e("th",{class:"border-0"},"No Anggota"),e("th",{class:"border-0"},"Nama"),e("th",{class:"border-0"},"Jabatan"),e("th",{class:"border-0"},"Instansi"),e("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1)),$=a(()=>e("div",{class:"mt-2"},null,-1)),ee={class:"fw-bold text-center"},se={class:"text-center"},te=a(()=>e("i",{class:"fa fa-eye fa-lg","aria-hidden":"true"},null,-1)),oe=["href"],ae=a(()=>e("i",{class:"fa fa-pencil fa-lg","aria-hidden":"true"},null,-1)),de=[ae],ne=["onClick"],re=a(()=>e("i",{class:"fa fa-qrcode fa-lg","aria-hidden":"true"},null,-1)),le=[re],ie={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1",role:"dialog"},ce={class:"modal-dialog modal-dialog-centered",role:"document"},_e={class:"modal-content"},he={class:"modal-header"},me=a(()=>e("h5",{class:"modal-title"},"QR Code",-1)),ue=a(()=>e("span",{"aria-hidden":"true"},"\xD7",-1)),be=[ue],pe={class:"modal-body text-center"},fe=["src"],ge={class:"modal-footer"};function ve(o,t,d,c,_,i){const v=h("Head"),w=h("Link"),y=h("Pagination");return r(),l(g,null,[m(v,null,{default:f(()=>[U]),_:1}),e("div",B,[e("div",D,[e("div",E,[e("div",O,[e("div",T,[e("form",{onSubmit:t[1]||(t[1]=I((...s)=>c.handleSearch&&c.handleSearch(...s),["prevent"]))},[e("div",F,[S(e("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":t[0]||(t[0]=s=>c.search=s),placeholder:"masukkan kata kunci dan enter..."},null,512),[[N,c.search]]),G])],32)])])])]),e("div",J,[e("div",z,[e("div",K,[e("div",W,[e("div",X,[e("table",Y,[Z,$,e("tbody",null,[(r(!0),l(g,null,R(d.datas.data,(s,b)=>(r(),l("tr",{key:b},[e("td",ee,n(++b+(d.datas.current_page-1)*d.datas.per_page),1),e("td",null,n(s.main.nomember),1),e("td",null,n(s.main.name),1),e("td",null,n(s.position)+" "+n(s.level),1),e("td",null,n(s.agency)+" "+n(o.$page.props.auth.user.role),1),e("td",se,[m(w,{href:`/admin/members/${s.id}`,title:"view",class:"btn btn-sm btn-primary border-0 shadow me-2",type:"button"},{default:f(()=>[te]),_:2},1032,["href"]),o.$page.props.auth.user.role=="administrator"||o.$page.props.auth.user.role=="keanggotaan"?(r(),l("a",{key:0,href:`/admin/members/${s.id}/edit`,title:"edit",class:"btn btn-sm btn-warning border-0 shadow me-2"},de,8,oe)):u("",!0),e("button",{onClick:we=>i.showQrModal(s.main.nomember),class:"btn btn-sm btn-info border-0 shadow me-2"},le,8,ne)])]))),128))])])]),m(y,{links:d.datas.links,align:"end"},null,8,["links"])])])])])]),_.showModal?(r(),l("div",ie,[e("div",ce,[e("div",_e,[e("div",he,[me,e("button",{type:"button",class:"close",onClick:t[2]||(t[2]=(...s)=>i.closeModal&&i.closeModal(...s)),"aria-label":"Close"},be)]),e("div",pe,[_.qrCode?(r(),l("img",{key:0,src:_.qrCode,alt:"QR Code"},null,8,fe)):u("",!0)]),Q(" "+n(_.qrCode)+" ",1),e("div",ge,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...s)=>i.closeModal&&i.closeModal(...s))},"Close")])])])])):u("",!0)],64)}const Le=A(H,[["render",ve],["__scopeId","data-v-a72de94e"]]);export{Le as default};
