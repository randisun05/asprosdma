import{L as _}from"./Admin.69c9e5a1.js";import{P as A}from"./Pagination.a10de99e.js";import{H as L,L as I,q as U,r as g,x as j,a as x,o as u,c as m,b as D,w as C,d as t,i as c,t as a,f as S,h as T,F as k,j as p,v as M,k as B,g as N}from"./app.4cb6840a.js";import{S as b}from"./sweetalert2.all.1cd5f157.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:_,components:{Head:L,Link:I,Pagination:A},props:{errors:Object,archive:Object,users:Array,datas:Array,refs:Array},setup(d){const s=U({archive_id:d.archive.id,user_id:[],allSelected:!1,status:d.archive.status,detail:d.archive.detail}),e=g(""),n=j(()=>d.refs.filter(i=>i.name.toLowerCase().includes(e.value.toLowerCase()))),y=()=>{s.user_id=s.allSelected?d.users.map(i=>i.id):[]},w=i=>{s.user_id.includes(i.id)||s.user_id.push(i.id),e.value=""},v=i=>{s.user_id=s.user_id.filter(o=>o!==i)},f=i=>d.refs.find(o=>o.id===i)||{name:"Unknown"},l=i=>{b.fire({title:"Apakah Anda yakin?",text:"Anda akan mengupdate disposisi ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(o=>{o.isConfirmed&&(B.Inertia.get(`/admin/archives/inbox/${i}/update`,{detail:s.detail,status:s.status}),b.fire({title:"Success!",text:"Status Approved!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},r=i=>{b.fire({title:"Apakah Anda yakin?",text:"Anda akan disposisi arsip ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Send it!"}).then(o=>{o.isConfirmed&&(B.Inertia.post(`/admin/archives/disposition/inbox/${i}`,{user_id:s.user_id}),b.fire({title:"Success!",text:"Status Sent!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},h=g(null);return{form:s,submitForm:l,submitDisposisi:r,selectAll:y,searchQuery:e,filteredRefs:n,addUser:w,removeUser:v,getUserById:f,selectedData:h,viewDetail:i=>{h.value=i,new bootstrap.Modal(document.getElementById("detailModal")).show()},getDocumentUrl:i=>`/storage/${i}`}}},P={class:"container-fluid padding px-5"},F={class:"row"},E={class:"col-md-12"},K={class:"col-md-12"},O={class:"card border-0 shadow"},Y={class:"card-body"},q={class:"row"},J={class:"table table-borderless"},Q=["href"],R={class:"row py-5"},z={class:"col-md-3"},G={class:"col-md-4 col-sm-4"},W={class:"col-md-5 col-sm-5"},X={class:"text-center mt-2"},Z={class:"row"},$={class:"col-md-8"},tt={class:"table table-borderless"},st={class:"fw-bold text-center"},et={class:"text-center"},it={class:"text-center"},at={class:"text-center"},lt={key:0,class:"text-center"},nt=["onClick"],ot={class:"modal fade",id:"detailModal",tabindex:"-1","aria-labelledby":"detailModalLabel","aria-hidden":"true"},dt={class:"modal-dialog modal-dialog-centered"},rt={class:"modal-content"},ut={class:"modal-body"};function mt(d,s,e,n,y,w){const v=x("Head"),f=x("Link");return u(),m(k,null,[D(v,null,{default:C(()=>[...s[3]||(s[3]=[t("title",null,"Hubungi Aspro",-1)])]),_:1}),t("div",P,[t("div",F,[t("div",E,[D(f,{href:"/admin/archives/inbox",class:"btn btn-md btn-primary border-0 shadow mb-3",type:"button"},{default:C(()=>[...s[4]||(s[4]=[t("i",{class:"fa fa-arrow-left","aria-hidden":"true"},null,-1),c(" Kembali",-1)])]),_:1})])]),t("div",K,[t("div",O,[t("div",Y,[t("div",q,[s[16]||(s[16]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),c(" Data Pengirim")],-1)),s[17]||(s[17]=t("hr",null,null,-1)),t("table",J,[t("tbody",null,[t("tr",null,[s[5]||(s[5]=t("th",null,"NIP",-1)),t("td",null,a(e.archive.archive.nip),1),s[6]||(s[6]=t("th",null,"Jabatan",-1)),t("td",null,a(e.archive.archive.position),1)]),t("tr",null,[s[7]||(s[7]=t("th",null,"Nama",-1)),t("td",null,a(e.archive.archive.name),1),s[8]||(s[8]=t("th",null,"Instansi",-1)),t("td",null,a(e.archive.archive.agency),1)]),t("tr",null,[s[9]||(s[9]=t("th",null,"Email",-1)),t("td",null,a(e.archive.archive.email),1),s[10]||(s[10]=t("th",null,"Status",-1)),t("td",null,a(e.archive.archive.status==1?"Belum ditindaklanjuti":e.archive.archive.status==2?"Dalam proses":e.archive.archive.status==3?"Sudah selesai":e.archive.archive.status==4?"Telah didisposisi oleh administrator":"Tidak ditindak lanjuti"),1)]),t("tr",null,[s[11]||(s[11]=t("th",null,"Kontak",-1)),t("td",null,a(e.archive.archive.contact),1),s[12]||(s[12]=t("th",null,"Title",-1)),t("td",null,a(e.archive.archive.title),1)]),t("tr",null,[s[14]||(s[14]=t("th",null,"Detail",-1)),t("td",null,a(e.archive.archive.detail),1),s[15]||(s[15]=t("th",null,"Document",-1)),t("td",null,[t("a",{class:"btn btn-sm btn-primary border-0 me-1","data-fancybox":"",href:n.getDocumentUrl(e.archive.document)},[...s[13]||(s[13]=[t("i",{class:"fa fa-eye"},null,-1),c("View",-1)])],8,Q)])])])])]),t("div",R,[s[22]||(s[22]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),c("Tindaklanjuti")],-1)),s[23]||(s[23]=t("hr",null,null,-1)),t("div",z,[s[19]||(s[19]=t("label",{for:"status"},"Status",-1)),S(t("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>n.form.status=l),class:"form-control",id:"status"},[...s[18]||(s[18]=[t("option",{selected:"",disabled:""},"Pilih Status",-1),t("option",{value:"1",disabled:""},"Belum Ditindak lanjuti",-1),t("option",{value:"3"},"Selesai",-1),t("option",{value:"5"},"Tidak DItindaklanjuti",-1)])],512),[[T,n.form.status]])]),t("div",G,[s[20]||(s[20]=t("label",{for:"detail"},"Isi Disposisi",-1)),t("div",null,[t("div",null,[(u(!0),m(k,null,p(e.archive.isi.split(","),(l,r)=>(u(),m("span",{key:r,class:"badge bg-primary me-1"},a(l.trim()),1))),128))])])]),t("div",W,[s[21]||(s[21]=t("label",{for:"detail"},"Catatan dan Bukti Dukung",-1)),S(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>n.form.detail=l),class:"form-control",id:"detail",rows:"2"},null,512),[[M,n.form.detail]])]),t("div",X,[t("button",{class:"button btn-primary",style:{width:"300px"},onClick:s[2]||(s[2]=l=>n.submitForm(e.archive.id))},"Simpan")])]),t("div",Z,[t("div",$,[s[28]||(s[28]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),c(" Histori Disposisi")],-1)),s[29]||(s[29]=t("hr",null,null,-1)),t("table",tt,[s[27]||(s[27]=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}}," No."),t("th",{class:"border-0"},"Disposisi"),t("th",{class:"border-0"},"Status"),t("th",{class:"border-0"},"Update"),t("th",{class:"border-0"},"Aksi")])],-1)),t("tbody",null,[(u(!0),m(k,null,p(e.datas,(l,r)=>(u(),m("tr",{key:r},[t("td",st,a(++r),1),t("td",et,a(l.user.name),1),t("td",it,a(l.status==1?"Belum ditindak lanjuti":"telah didisposisi ke "),1),t("td",at,a(new Date(l.updated_at).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})),1),l.status!="1"?(u(),m("td",lt,[t("button",{class:"btn btn-sm btn-primary",onClick:h=>n.viewDetail(l)},[...s[24]||(s[24]=[t("i",{class:"fa fa-eye"},null,-1)])],8,nt),t("div",ot,[t("div",dt,[t("div",rt,[s[25]||(s[25]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"detailModalLabel"},"Detail Disposisi"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",ut,[t("p",null,a(n.selectedData&&n.selectedData.detail?n.selectedData.detail:"tidak diberikan keterangan"),1)]),s[26]||(s[26]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])])):N("",!0)]))),128))])])])])])])])])],64)}const wt=V(H,[["render",mt]]);export{wt as default};
