import{L as k}from"./Admin.6dda724b.js";import{G as C,a as x}from"./GenerateQRCode.78fa2b30.js";import{P as M}from"./Pagination.1060af09.js";import{H as q,L,r as p,a as m,o as d,c as r,b as u,w as f,d as e,e as I,f as R,v as S,F as g,i as Q,g as h,j as N,t as l,p as P,l as j}from"./app.ba6b27ad.js";import"./sweetalert2.all.a7c2ca9d.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:k,components:{Head:q,Link:L,Pagination:M,GenerateQRCode:C},props:{errors:Object,datas:Object},data(){return{showModal:!1,qrCode:null,text:""}},methods:{async showQrModal(t){try{const o=await x.post(`${window.location.origin}/admin/generate-qr`,{text:t},{responseType:"blob"}),n=URL.createObjectURL(o.data);this.qrCode=n,this.showModal=!0}catch(o){console.error("Error generating QR code:",o)}},closeModal(){this.showModal=!1,this.qrCode=null}},setup(){const t=p(new URL(document.location).searchParams.get("q")),o=()=>{N.Inertia.get("/admin/members",{q:t.value})},n=p(!1);return{search:t,handleSearch:o,showModalEmail:n}}},a=t=>(P("data-v-91b03cf2"),t=t(),j(),t),U=a(()=>e("title",null,"Administrator",-1)),V={class:"container-fluid padding px-5"},B={class:"row"},D={class:"col-md-12"},E={class:"row"},O={class:"col-md-6 col-12 mb-2"},F={class:"input-group"},G=a(()=>e("span",{class:"input-group-text border-0 shadow"},[e("i",{class:"fa fa-search"})],-1)),T={class:"row mt-1"},J={class:"col-md-12"},z={class:"card border-0 shadow"},K={class:"card-body"},W={class:"table-responsive"},X={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},Y=a(()=>e("thead",{class:"thead-dark"},[e("tr",{class:"border-0 text-center"},[e("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),e("th",{class:"border-0"},"No Anggota"),e("th",{class:"border-0"},"Nama"),e("th",{class:"border-0"},"Jabatan"),e("th",{class:"border-0"},"Instansi"),e("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1)),Z=a(()=>e("div",{class:"mt-2"},null,-1)),$={class:"fw-bold text-center"},ee={class:"text-center"},se=a(()=>e("i",{class:"fa fa-eye fa-lg","aria-hidden":"true"},null,-1)),oe=["href"],te=a(()=>e("i",{class:"fa fa-pencil fa-lg","aria-hidden":"true"},null,-1)),ae=[te],ne=["onClick"],de=a(()=>e("i",{class:"fa fa-qrcode fa-lg","aria-hidden":"true"},null,-1)),re=[de],le={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1",role:"dialog"},ie={class:"modal-dialog modal-dialog-centered",role:"document"},ce={class:"modal-content"},_e={class:"modal-header"},he=a(()=>e("h5",{class:"modal-title"},"QR Code",-1)),me=a(()=>e("span",{"aria-hidden":"true"},"\xD7",-1)),ue=[me],be={class:"modal-body text-center"},pe=["src"],fe={class:"modal-footer"},ge=["href"];function we(t,o,n,_,i,c){const w=m("Head"),v=m("Link"),y=m("Pagination");return d(),r(g,null,[u(w,null,{default:f(()=>[U]),_:1}),e("div",V,[e("div",B,[e("div",D,[e("div",E,[e("div",O,[e("form",{onSubmit:o[1]||(o[1]=I((...s)=>_.handleSearch&&_.handleSearch(...s),["prevent"]))},[e("div",F,[R(e("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":o[0]||(o[0]=s=>_.search=s),placeholder:"masukkan kata kunci dan enter..."},null,512),[[S,_.search]]),G])],32)])])])]),e("div",T,[e("div",J,[e("div",z,[e("div",K,[e("div",W,[e("table",X,[Y,Z,e("tbody",null,[(d(!0),r(g,null,Q(n.datas.data,(s,b)=>(d(),r("tr",{key:b},[e("td",$,l(++b+(n.datas.current_page-1)*n.datas.per_page),1),e("td",null,l(s.main.nomember),1),e("td",null,l(s.main.name),1),e("td",null,l(s.position)+" "+l(s.level),1),e("td",null,l(s.agency),1),e("td",ee,[u(v,{href:`/admin/members/${s.id}`,title:"view",class:"btn btn-sm btn-primary border-0 shadow me-2",type:"button"},{default:f(()=>[se]),_:2},1032,["href"]),t.$page.props.auth.user.role=="administrator"||t.$page.props.auth.user.role=="keanggotaan"?(d(),r("a",{key:0,href:`/admin/members/${s.id}/edit`,title:"edit",class:"btn btn-sm btn-warning border-0 shadow me-2"},ae,8,oe)):h("",!0),e("button",{onClick:ve=>c.showQrModal(s.main.nomember),class:"btn btn-sm btn-info border-0 shadow me-2"},re,8,ne)])]))),128))])])]),u(y,{links:n.datas.links,align:"end"},null,8,["links"])])])])])]),i.showModal?(d(),r("div",le,[e("div",ie,[e("div",ce,[e("div",_e,[he,e("button",{type:"button",class:"close",onClick:o[2]||(o[2]=(...s)=>c.closeModal&&c.closeModal(...s)),"aria-label":"Close"},ue)]),e("div",be,[i.qrCode?(d(),r("img",{key:0,src:i.qrCode,alt:"QR Code"},null,8,pe)):h("",!0)]),e("div",fe,[i.qrCode?(d(),r("a",{key:0,href:i.qrCode,download:"qr-code.png",class:"btn btn-success"}," Download QR Code ",8,ge)):h("",!0),e("button",{type:"button",class:"btn btn-secondary",onClick:o[3]||(o[3]=(...s)=>c.closeModal&&c.closeModal(...s))},"Close")])])])])):h("",!0)],64)}const Le=A(H,[["render",we],["__scopeId","data-v-91b03cf2"]]);export{Le as default};
