import{L as k}from"./Admin.5cf74302.js";import{G as C,a as x}from"./GenerateQRCode.f34fa138.js";import{P as M}from"./Pagination.319183c8.js";import{H as L,L as q,s as p,r as h,o as d,c as l,e as m,w as f,a as e,i as I,j as S,v as R,F as g,D as N,d as u,l as Q,t as r,I as P,J as j}from"./app.087a5f22.js";import"./sweetalert2.all.81608b32.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:k,components:{Head:L,Link:q,Pagination:M,GenerateQRCode:C},props:{errors:Object,datas:Object},data(){return{showModal:!1,qrCode:null,text:""}},methods:{async showQrModal(o){try{const t=await x.post("https://asprosdma.id/admin/generate-qr",{text:o},{responseType:"blob"}),n=URL.createObjectURL(t.data);this.qrCode=n,this.showModal=!0}catch(t){console.error("Error generating QR code:",t)}},closeModal(){this.showModal=!1,this.qrCode=null}},setup(){const o=p(new URL(document.location).searchParams.get("q")),t=()=>{Q.Inertia.get("/admin/members",{q:o.value})},n=p(!1);return{search:o,handleSearch:t,showModalEmail:n}}},a=o=>(P("data-v-011783ae"),o=o(),j(),o),U=a(()=>e("title",null,"Administrator",-1)),V={class:"container-fluid padding px-5"},B={class:"row"},D={class:"col-md-12"},E={class:"row"},O={class:"col-md-6 col-12 mb-2"},F={class:"input-group"},G=a(()=>e("span",{class:"input-group-text border-0 shadow"},[e("i",{class:"fa fa-search"})],-1)),J={class:"row mt-1"},T={class:"col-md-12"},z={class:"card border-0 shadow"},K={class:"card-body"},W={class:"table-responsive"},X={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},Y=a(()=>e("thead",{class:"thead-dark"},[e("tr",{class:"border-0 text-center"},[e("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),e("th",{class:"border-0"},"No Anggota"),e("th",{class:"border-0"},"Nama"),e("th",{class:"border-0"},"Jabatan"),e("th",{class:"border-0"},"Instansi"),e("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1)),Z=a(()=>e("div",{class:"mt-2"},null,-1)),$={class:"fw-bold text-center"},ee={class:"text-center"},se=a(()=>e("i",{class:"fa fa-eye fa-lg","aria-hidden":"true"},null,-1)),te=["href"],oe=a(()=>e("i",{class:"fa fa-pencil fa-lg","aria-hidden":"true"},null,-1)),ae=[oe],ne=["onClick"],de=a(()=>e("i",{class:"fa fa-qrcode fa-lg","aria-hidden":"true"},null,-1)),le=[de],re={key:0,class:"modal fade show",style:{display:"block"},tabindex:"-1",role:"dialog"},ie={class:"modal-dialog modal-dialog-centered",role:"document"},ce={class:"modal-content"},_e={class:"modal-header"},he=a(()=>e("h5",{class:"modal-title"},"QR Code",-1)),me=a(()=>e("span",{"aria-hidden":"true"},"\xD7",-1)),ue=[me],be={class:"modal-body text-center"},pe=["src"],fe={class:"modal-footer"};function ge(o,t,n,c,_,i){const v=h("Head"),w=h("Link"),y=h("Pagination");return d(),l(g,null,[m(v,null,{default:f(()=>[U]),_:1}),e("div",V,[e("div",B,[e("div",D,[e("div",E,[e("div",O,[e("form",{onSubmit:t[1]||(t[1]=I((...s)=>c.handleSearch&&c.handleSearch(...s),["prevent"]))},[e("div",F,[S(e("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":t[0]||(t[0]=s=>c.search=s),placeholder:"masukkan kata kunci dan enter..."},null,512),[[R,c.search]]),G])],32)])])])]),e("div",J,[e("div",T,[e("div",z,[e("div",K,[e("div",W,[e("table",X,[Y,Z,e("tbody",null,[(d(!0),l(g,null,N(n.datas.data,(s,b)=>(d(),l("tr",{key:b},[e("td",$,r(++b+(n.datas.current_page-1)*n.datas.per_page),1),e("td",null,r(s.main.nomember),1),e("td",null,r(s.main.name),1),e("td",null,r(s.position)+" "+r(s.level),1),e("td",null,r(s.agency),1),e("td",ee,[m(w,{href:`/admin/members/${s.id}`,title:"view",class:"btn btn-sm btn-primary border-0 shadow me-2",type:"button"},{default:f(()=>[se]),_:2},1032,["href"]),o.$page.props.auth.user.role=="administrator"||o.$page.props.auth.user.role=="keanggotaan"?(d(),l("a",{key:0,href:`/admin/members/${s.id}/edit`,title:"edit",class:"btn btn-sm btn-warning border-0 shadow me-2"},ae,8,te)):u("",!0),e("button",{onClick:ve=>i.showQrModal(s.main.nomember),class:"btn btn-sm btn-info border-0 shadow me-2"},le,8,ne)])]))),128))])])]),m(y,{links:n.datas.links,align:"end"},null,8,["links"])])])])])]),_.showModal?(d(),l("div",re,[e("div",ie,[e("div",ce,[e("div",_e,[he,e("button",{type:"button",class:"close",onClick:t[2]||(t[2]=(...s)=>i.closeModal&&i.closeModal(...s)),"aria-label":"Close"},ue)]),e("div",be,[_.qrCode?(d(),l("img",{key:0,src:_.qrCode,alt:"QR Code"},null,8,pe)):u("",!0)]),e("div",fe,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...s)=>i.closeModal&&i.closeModal(...s))},"Close")])])])])):u("",!0)],64)}const Le=A(H,[["render",ge],["__scopeId","data-v-011783ae"]]);export{Le as default};
