import{L as B}from"./Admin.440b0274.js";import{P as A}from"./Pagination.ce988980.js";import{H as S,L as j,r as L,A as R,a as _,o as n,c as i,b as c,w as u,d as t,e as g,f as P,v as T,F as x,j as I,k as p,i as w,t as o,g as y,l as N}from"./app.5c73e509.js";import{S as f}from"./sweetalert2.all.74b77e0d.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";const V={layout:B,components:{Head:S,Link:j,Pagination:A},props:{errors:Object,posts:Object,publishs:Object,categories:Object,limiteds:Object},setup(v){const s=L(new URL(document.location).searchParams.get("q")),b=()=>{p.Inertia.get("/admin/admin/posts",{q:s.value})},r=l=>{f.fire({title:"Apakah Anda yakin?",text:"Anda tidak akan dapat mengembalikan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&(p.Inertia.delete(`/admin/posts/${l}`),f.fire({title:"Deleted!",text:"Peserta Berhasil Dihapus!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},C=l=>{f.fire({title:"Apakah Anda yakin?",text:"Post akan diajukan untuk publish!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Submit it!"}).then(a=>{a.isConfirmed&&(p.Inertia.get(`/admin/posts/${l}/submission`),f.fire({title:"Success!",text:"Status Returned!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},h=l=>{l.data.forEach(a=>{if(Array.isArray(a.react)){const k=a.react.filter(d=>d.react_id==="1").length,e=a.react.filter(d=>d.react_id==="2").length,m=a.react.filter(d=>d.react_id==="3").length;a.react={love:k,like:e,view:m}}else a.react={love:0,like:0,view:0}})};return R(()=>v.posts,l=>{h(l)},{immediate:!0}),{search:s,handleSearch:b,countReactions:h,handleSubmission:C,destroy:r}}},D={class:"container-fluid padding px-5"},H={class:"row"},U={class:"col-md-12"},K={class:"row"},q={class:"col-md-1 col-12 mb-2"},E={class:"col-md-1 col-12 mb-2"},F={class:"col-md-1 col-12 mb-2"},M={class:"col-md-4 col-12 mb-2"},Y={class:"input-group"},z={class:"row mt-1"},G={class:"col-md-12"},J={class:"card border-0 shadow"},Q={class:"card-body"},W={class:"table-responsive",id:"sub"},X={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},Z={class:"fw-bold text-center"},$={key:0,class:"badge bg-success",title:"disetujui untuk di publish"},tt={key:1,class:"badge bg-warning",title:"hanya untuk konsumsi pribadi"},et={key:2,class:"badge bg-warning",title:"silakan dicek kembali"},st={key:3,class:"badge bg-danger",title:"ditolak untuk publish"},at={key:4,class:"badge bg-secondary"},nt={key:5,class:"badge bg-danger",title:"ditolak untuk publish"},it={key:6,class:"badge bg-secondary"},ot={class:"text-center"},lt=["onClick"];function rt(v,s,b,r,C,h){const l=_("Head"),a=_("Link"),k=_("Pagination");return n(),i(x,null,[c(l,null,{default:u(()=>[...s[2]||(s[2]=[t("title",null,"Administrator",-1)])]),_:1}),t("div",D,[t("div",H,[t("div",U,[t("div",K,[t("div",q,[c(a,{href:"/admin/posts",class:"btn btn-md btn-primary border-0 shadow w-100",type:"button"},{default:u(()=>[...s[3]||(s[3]=[t("i",{class:"fa fa-arrow-left"},null,-1),w(" Kembali",-1)])]),_:1})]),t("div",E,[c(a,{href:"/admin/posts/create",class:"btn btn-md btn-primary border-0 shadow w-100",type:"button"},{default:u(()=>[...s[4]||(s[4]=[t("i",{class:"fa fa-plus-circle"},null,-1),w(" Tambah",-1)])]),_:1})]),t("div",F,[c(a,{href:"/admin/category/create",class:"btn btn-md btn-warning border-0 shadow w-100",type:"button"},{default:u(()=>[...s[5]||(s[5]=[t("i",{class:"fa fa-plus-circle"},null,-1),w(" Kategori ",-1)])]),_:1})]),t("div",M,[t("form",{onSubmit:s[1]||(s[1]=g((...e)=>r.handleSearch&&r.handleSearch(...e),["prevent"]))},[t("div",Y,[P(t("input",{type:"text",class:"form-control border-0 shadow","onUpdate:modelValue":s[0]||(s[0]=e=>r.search=e),placeholder:"masukkan kata kunci dan enter..."},null,512),[[T,r.search]]),s[6]||(s[6]=t("span",{class:"input-group-text border-0 shadow"},[t("i",{class:"fa fa-search"})],-1))])],32)])])])]),t("div",z,[t("div",G,[t("div",J,[t("div",Q,[t("div",W,[t("table",X,[s[11]||(s[11]=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),t("th",{class:"border-0"},"Titleee"),t("th",{class:"border-0"},"Author"),t("th",{class:"border-0"},"Kategori"),t("th",{class:"border-0"},"Status"),t("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1)),s[12]||(s[12]=t("div",{class:"mt-2"},null,-1)),t("tbody",null,[(n(!0),i(x,null,I(b.posts.data,(e,m)=>(n(),i("tr",{key:m},[t("td",Z,o(++m+(b.posts.current_page-1)*b.posts.per_page),1),t("td",null,o(e.title),1),t("td",null,o(e.member_id!==1?e.member.name:"Administrator"),1),t("td",null,o(e.category.title),1),t("td",null,[e.status==="approved"?(n(),i("span",$,o(e.status),1)):e.status==="private"?(n(),i("span",tt,o(e.status),1)):e.status==="perlu ada perbaikan"?(n(),i("span",et,o(e.status),1)):e.status==="rejected"?(n(),i("span",st,o(e.status),1)):e.status==="submission"?(n(),i("span",at,o(e.status),1)):e.status==="return"?(n(),i("span",nt,o(e.status),1)):e.status==="limited"?(n(),i("span",it,o(e.status),1)):y("",!0)]),t("td",ot,[c(a,{href:`/admin/posts/${encodeURIComponent(e.slug)}/edit`,class:"btn btn-sm btn-warning border-0 shadow me-2",type:"button",title:"edit"},{default:u(()=>[...s[7]||(s[7]=[t("i",{class:"fa fa-pencil"},null,-1)])]),_:1},8,["href"]),c(a,{href:`/admin/posts/${encodeURIComponent(e.slug)}`,class:"btn btn-sm btn-info border-0 shadow me-2",type:"button"},{default:u(()=>[...s[8]||(s[8]=[t("i",{class:"fa fa-eye",title:"lihat detail"},null,-1)])]),_:1},8,["href"]),e.status!=="submission"&&e.status!=="approved"&&e.status!=="limited"?(n(),N(a,{key:0,onClick:g(d=>r.handleSubmission(e.id),["prevent"]),class:"btn btn-sm btn-success border-0 shadow me-2",type:"button",title:"pengajuan publish"},{default:u(()=>[...s[9]||(s[9]=[t("i",{class:"fa fa-envelope"},null,-1)])]),_:1},8,["onClick"])):y("",!0),e.status!=="rejected"&&e.status!=="approved"&&e.status!=="limited"?(n(),i("button",{key:1,onClick:g(d=>r.destroy(e.id),["prevent"]),class:"btn btn-sm btn-danger border-0 me-2"},[...s[10]||(s[10]=[t("i",{class:"fa fa-trash",title:"hapus"},null,-1)])],8,lt)):y("",!0)])]))),128))])])]),c(k,{links:b.posts.links,align:"end"},null,8,["links"])])])])])])],64)}const ft=O(V,[["render",rt]]);export{ft as default};
