import{L as U}from"./Admin.0f093635.js";import{H as B,L as A,u as T,r as C,z as L,a as x,o as n,c as d,b as w,w as D,d as t,t as o,f as v,y as S,F as _,i as b,g as y,v as H,j as V,k as u}from"./app.6217ff36.js";import{S as I}from"./sweetalert2.all.99916cfc.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";const M={layout:U,components:{Head:B,Link:A},props:{errors:Object,archive:Object,users:Array,datas:Array,refs:Array},setup(h){const e=T({archive_id:h.archive.id,user_id:[],allSelected:!1,isi:[]}),a=C(""),l=L(()=>h.refs.filter(i=>i.name.toLowerCase().includes(a.value.toLowerCase()))),g=()=>{e.user_id=e.allSelected?h.users.map(i=>i.id):[]},p=i=>{e.user_id.includes(i.id)||e.user_id.push(i.id),a.value=""},k=i=>{e.user_id=e.user_id.filter(r=>r!==i)},f=i=>h.refs.find(r=>r.id===i)||{name:"Unknown"},s=i=>{I.fire({title:"Apakah Anda yakin?",text:"Anda akan disposisi arsip ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Send it!"}).then(r=>{r.isConfirmed&&(V.Inertia.post(`/admin/archives/disposition/${i}`,{user_id:e.user_id,isi:e.isi}),I.fire({title:"Success!",text:"Status Sent!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},c=C(null);return{form:e,submitDisposisi:s,selectAll:g,searchQuery:a,filteredRefs:l,addUser:p,removeUser:k,getUserById:f,viewDetail:i=>{c.value=i,new bootstrap.Modal(document.getElementById("detailModal")).show()},selectedData:c,getDocumentUrl:i=>`/storage/${i}`,updateIsi:i=>{const r=i.target;r.checked?e.isi.push(r.value):e.isi=e.isi.filter(j=>j!==r.value)}}}},N=t("title",null,"Hubungi Aspro",-1),P={class:"container-fluid padding px-5"},R={class:"row"},F={class:"col-md-12"},Q=t("i",{class:"fa fa-arrow-left","aria-hidden":"true"},null,-1),E=u(" Kembali"),z={class:"col-md-12"},O={class:"card border-0 shadow"},W={class:"card-body"},J={class:"row"},Y=t("h5",null,[t("i",{class:"fa fa-bookmark"}),u(" Data Pengirim")],-1),q=t("hr",null,null,-1),G={class:"table table-borderless"},X=t("th",null,"NIP",-1),Z=t("th",null,"Jabatan",-1),$=t("th",null,"Nama",-1),tt=t("th",null,"Instansi",-1),st=t("th",null,"Email",-1),et=t("th",null,"Status",-1),lt=t("th",null,"Kontak",-1),at=t("th",null,"Title",-1),it=t("th",null,"Detail",-1),ot=t("th",null,"Document",-1),nt=["href"],dt=t("i",{class:"fa fa-eye"},null,-1),ct=u("View"),rt=[dt,ct],ut={class:"row"},ht={class:"col-md-3"},_t=t("h5",null,[t("i",{class:"fa fa-bookmark"}),u(" Disposisi")],-1),mt=t("hr",null,null,-1),bt=u(" Disposisi ke "),kt={key:0,class:"table table-borderless",style:{width:"50%"}},ft={class:"border-0 rounded-start",style:{width:"5%"}},vt=u(),yt=t("th",{class:"border-0 rounded-start"}," Check All ",-1),gt=["id","value","checked"],pt={class:"text-left"},Ct=["for"],xt={key:1,class:"mt-2"},wt={class:"list-group"},Dt=["onClick"],St={class:"mt-2"},It=["onClick"],jt={class:"col-3"},Ut=t("h5",null,[t("i",{class:"fa fa-bookmark"}),u("Isi Disposisi")],-1),Bt=t("hr",null,null,-1),At={class:"row",style:{"font-size":"13px"}},Tt={class:"col-6"},Lt=t("label",{class:"form-check-label",for:"status1"},"Selesaikan/Tindaklanjuti",-1),Ht=t("label",{class:"form-check-label",for:"status2"},"Siapkan bahan",-1),Vt=t("label",{class:"form-check-label",for:"status3"},"Buat konsep jawaban",-1),Kt=t("label",{class:"form-check-label",for:"status4"},"Koodinasikan",-1),Mt=t("label",{class:"form-check-label",for:"status5"},"Pelajari/Kaji",-1),Nt={class:"col-6"},Pt=t("label",{class:"form-check-label",for:"status6"},"Untuk diketahui",-1),Rt=t("label",{class:"form-check-label",for:"status7"},"Wakil/Hadiri",-1),Ft=t("label",{class:"form-check-label",for:"status8"},"Untuk menjadi perhatian",-1),Qt=t("label",{class:"form-check-label",for:"status9"},"Pantau",-1),Et=t("label",{class:"form-check-label",for:"status10"},"Temui Saya",-1),zt=t("label",{class:"form-check-label",for:"status11"},"File/Simpan",-1),Ot={class:"col-6"},Wt=t("h5",null,[t("i",{class:"fa fa-bookmark"}),u("Histori Disposisi")],-1),Jt=t("hr",null,null,-1),Yt={class:"table table-borderless"},qt=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}}," No."),t("th",{class:"border-0"},"Disposisi"),t("th",{class:"border-0"},"Status"),t("th",{class:"border-0"},"Aksi")])],-1),Gt={class:"fw-bold text-center"},Xt={class:"text-center"},Zt={class:"text-center"},$t={key:0,class:"text-center"},ts=["onClick"],ss=t("i",{class:"fa fa-eye"},null,-1),es=[ss],ls={class:"modal fade",id:"detailModal",tabindex:"-1","aria-labelledby":"detailModalLabel","aria-hidden":"true"},as={class:"modal-dialog modal-dialog-centered"},is={class:"modal-content"},os=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"detailModalLabel"},"Keterangan"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ns={class:"modal-body"},ds=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);function cs(h,e,a,l,g,p){const k=x("Head"),f=x("Link");return n(),d(_,null,[w(k,null,{default:D(()=>[N]),_:1}),t("div",P,[t("div",R,[t("div",F,[w(f,{href:"/admin/archives",class:"btn btn-md btn-primary border-0 shadow mb-3",type:"button"},{default:D(()=>[Q,E]),_:1})]),t("div",z,[t("div",O,[t("div",W,[t("div",J,[Y,q,t("table",G,[t("tbody",null,[t("tr",null,[X,t("td",null,o(a.archive.nip),1),Z,t("td",null,o(a.archive.position),1)]),t("tr",null,[$,t("td",null,o(a.archive.name),1),tt,t("td",null,o(a.archive.agency),1)]),t("tr",null,[st,t("td",null,o(a.archive.email),1),et,t("td",null,o(a.archive.status==1?"Belum ditindak lanjuti":a.archive.status==2?"Dalam proses":a.archive.status==3?"Selesai":a.archive.status==4?"Telah didisposisi ke "+a.archive.user_names:"Tidak ditindak lanjuti"),1)]),t("tr",null,[lt,t("td",null,o(a.archive.contact),1),at,t("td",null,o(a.archive.title),1)]),t("tr",null,[it,t("td",null,o(a.archive.detail),1),ot,t("td",null,[t("a",{class:"btn btn-sm btn-primary border-0 me-1","data-fancybox":"",href:l.getDocumentUrl(a.archive.document)},rt,8,nt)])])])])]),t("div",ut,[t("div",ht,[_t,mt,bt,t("div",null,[a.users&&a.users.length>0?(n(),d("table",kt,[t("tbody",null,[t("tr",null,[t("th",ft,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>l.form.allSelected=s),onChange:e[1]||(e[1]=(...s)=>l.selectAll&&l.selectAll(...s))},null,544),[[S,l.form.allSelected]])]),vt,yt]),(n(!0),d(_,null,b(a.users,(s,c)=>(n(),d("tr",{key:c},[t("td",null,[v(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=m=>l.form.user_id=m),id:s.id,value:s.id,checked:l.form.allSelected},null,8,gt),[[S,l.form.user_id]])]),t("td",pt,[t("label",{class:"form-check-label",for:"user-"+s.id},o(s.name),9,Ct)])]))),128))])])):y("",!0),v(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=s=>l.searchQuery=s),placeholder:"Cari nama...",class:"form-control",onInput:e[4]||(e[4]=(...s)=>h.searchRefs&&h.searchRefs(...s))},null,544),[[H,l.searchQuery]]),l.searchQuery&&l.filteredRefs.length?(n(),d("div",xt,[t("ul",wt,[(n(!0),d(_,null,b(l.filteredRefs,s=>(n(),d("li",{key:s.id,class:"list-group-item",onClick:c=>l.addUser(s)},o(s.name),9,Dt))),128))])])):y("",!0),t("div",St,[(n(!0),d(_,null,b(l.form.user_id,(s,c)=>(n(),d("span",{key:c,class:"badge bg-primary me-2"},[u(o(l.getUserById(s).name)+" ",1),t("span",{onClick:m=>l.removeUser(s),class:"ms-1 text-white",style:{cursor:"pointer"}},"\xD7",8,It)]))),128))])]),t("button",{onClick:e[5]||(e[5]=s=>l.submitDisposisi(a.archive.id)),class:"btn btn-primary mt-3"},"Disposisi")]),t("div",jt,[Ut,Bt,t("div",At,[t("div",Tt,[t("div",null,[t("input",{type:"checkbox",id:"status1",value:"Selesaikan/Tindaklanjuti",onChange:e[6]||(e[6]=s=>l.updateIsi(s))},null,32),Lt]),t("div",null,[t("input",{type:"checkbox",id:"status2",value:"Siapkan bahan",onChange:e[7]||(e[7]=s=>l.updateIsi(s))},null,32),Ht]),t("div",null,[t("input",{type:"checkbox",id:"status3",value:"Buat konsep jawaban",onChange:e[8]||(e[8]=s=>l.updateIsi(s))},null,32),Vt]),t("div",null,[t("input",{type:"checkbox",id:"status4",value:"Koodinasikan",onChange:e[9]||(e[9]=s=>l.updateIsi(s))},null,32),Kt]),t("div",null,[t("input",{type:"checkbox",id:"status5",value:"Pelajari/Kaji",onChange:e[10]||(e[10]=s=>l.updateIsi(s))},null,32),Mt])]),t("div",Nt,[t("div",null,[t("input",{type:"checkbox",id:"status6",value:"Untuk diketahui",onChange:e[11]||(e[11]=s=>l.updateIsi(s))},null,32),Pt]),t("div",null,[t("input",{type:"checkbox",id:"status7",value:"Wakil/Hadiri",onChange:e[12]||(e[12]=s=>l.updateIsi(s))},null,32),Rt]),t("div",null,[t("input",{type:"checkbox",id:"status8",value:"Untuk menjadi perhatian",onChange:e[13]||(e[13]=s=>l.updateIsi(s))},null,32),Ft]),t("div",null,[t("input",{type:"checkbox",id:"status9",value:"Pantau",onChange:e[14]||(e[14]=s=>l.updateIsi(s))},null,32),Qt]),t("div",null,[t("input",{type:"checkbox",id:"status10",value:"Temui Saya",onChange:e[15]||(e[15]=s=>l.updateIsi(s))},null,32),Et]),t("div",null,[t("input",{type:"checkbox",id:"status11",value:"File/Simpan",onChange:e[16]||(e[16]=s=>l.updateIsi(s))},null,32),zt])])])]),t("div",Ot,[Wt,Jt,t("table",Yt,[qt,t("tbody",null,[(n(!0),d(_,null,b(a.datas,(s,c)=>(n(),d("tr",{key:c},[t("td",Gt,o(++c),1),t("td",Xt,o(s.user.name),1),t("td",Zt,o(s.status==1?"Belum ditindaklanjuti":s.status==2?"Dalam proses":s.status==3?"Selesai":s.status==4?"Telah didisposisi ke "+s.user_names:"Tidak ditindak lanjuti"),1),s.status!="1"?(n(),d("td",$t,[t("button",{class:"btn btn-sm btn-primary",onClick:m=>l.viewDetail(s)},es,8,ts),t("div",ls,[t("div",as,[t("div",is,[os,t("div",ns,[t("p",null,o(l.selectedData&&l.selectedData.detail?l.selectedData.detail:"tidak diberikan keterangan"),1)]),ds])])])])):y("",!0)]))),128))])])])])])])])])])],64)}const ks=K(M,[["render",cs]]);export{ks as default};
