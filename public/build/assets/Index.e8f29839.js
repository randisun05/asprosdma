import{L as D}from"./Admin.e2554486.js";import{P as E}from"./Pagination.d22c015f.js";import{H as I,r as k,a as g,o as m,c as u,b as y,w as P,d as t,g as v,F as w,j as U,t as i,e as b,f as r,v as p,N as C,k as f,n as V,i as x}from"./app.53f5973e.js";import{S as d}from"./sweetalert2.all.7398bd5b.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const S={layout:D,components:{Head:I,Pagination:E},props:{errors:Object,jurnals:Object},setup(){const o=k({title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}),l=k(!1);return{form:o,isEdit:l,handleFileUpload:e=>{o.value.bukti=e.target.files[0]},openAddModal:()=>{l.value=!1,o.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""},new bootstrap.Modal(document.getElementById("formModal")).show()},openEditModal:e=>{l.value=!0,o.value={id:e.id,title:e.title,date:e.date,bukti:null,nominal:e.nominal,type:e.type,keterangan:e.keterangan},new bootstrap.Modal(document.getElementById("formModal")).show()},submit:()=>{const e=new FormData;e.append("title",o.value.title),e.append("date",o.value.date||o.value.date),e.append("bukti",o.value.bukti),e.append("type",o.value.type),e.append("nominal",o.value.nominal),e.append("keterangan",o.value.keterangan),f.Inertia.post("/admin/jurnals/",e,{onError:s=>{console.error("Validation errors:",s),d.fire({title:"Error!",text:"Gagal menyimpan data. Periksa kembali input Anda.",icon:"error",timer:3e3,showConfirmButton:!1})},onSuccess:()=>{d.fire({title:"Success!",text:"Data berhasil disimpan.",icon:"success",timer:2e3,showConfirmButton:!1});const s=bootstrap.Modal.getInstance(document.getElementById("formModal"));s&&s.hide(),o.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}}})},update:()=>{if(!o.value.id){console.error("ID is missing in form data."),d.fire({title:"Error!",text:"ID tidak ditemukan. Tidak dapat memperbarui data.",icon:"error",timer:3e3,showConfirmButton:!1});return}const e=new FormData;e.append("title",o.value.title),e.append("date",o.value.date),e.append("type",o.value.type),e.append("nominal",o.value.nominal),e.append("keterangan",o.value.keterangan),o.value.bukti&&e.append("bukti",o.value.bukti),e.append("_method","PUT"),f.Inertia.post(`/admin/jurnals/${o.value.id}`,e,{forceFormData:!0,onError:s=>{console.error("Validation errors:",s),d.fire({title:"Error!",text:"Gagal memperbarui data. Periksa kembali input Anda.",icon:"error",timer:3e3,showConfirmButton:!1})},onSuccess:()=>{d.fire({title:"Success!",text:"Data berhasil diperbarui.",icon:"success",timer:2e3,showConfirmButton:!1});const s=bootstrap.Modal.getInstance(document.getElementById("formModal"));s&&s.hide(),o.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}}})},destroy:e=>{d.fire({title:"Apakah Anda yakin?",text:"Anda tidak akan dapat mengembalikan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&(f.Inertia.delete(`/admin/jurnals/${e}`),d.fire({title:"Deleted!",text:"Pencatatan Berhasil Dihapus!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},formatCurrency:e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e)}}},F=t("title",null,"Pencatatan",-1),T={class:"px-5 shadow padding"},N={class:"row"},L={class:"col-md-12 mb-3"},H=t("i",{class:"fa fa-plus-circle"},null,-1),R=x("Tambah"),G=[H,R],K={key:0,href:"/admin/jurnals/export",class:"btn btn-success ms-2"},O=t("i",{class:"fa fa-excel"},null,-1),z=x(" Report"),J=[O,z],Y={class:"row mt-1"},q={class:"col-md-12"},Q={class:"card border-0 shadow"},W={class:"card-body"},X={class:"table-responsive"},Z={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},j=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),t("th",{class:"border-0"},"Keterangan"),t("th",{class:"border-0"},"Tanggal"),t("th",{class:"border-0"},"Bukti"),t("th",{class:"border-0"},"Pemasukan"),t("th",{class:"border-0"},"Pengeluaran"),t("th",{class:"border-0"},"Saldo"),t("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1),$={class:"fw-bold text-center"},tt=["href"],et={key:0,class:"text-center"},at=["onClick"],ot=t("i",{class:"fa fa-pencil",title:"edit"},null,-1),nt=[ot],lt=["onClick"],st=t("i",{class:"fa fa-trash",title:"hapus"},null,-1),it=[st],dt={class:"modal fade",id:"formModal",tabindex:"-1","aria-labelledby":"formModalLabel","aria-hidden":"true"},rt={class:"modal-dialog modal-dialog-centered"},ct={class:"modal-content"},mt={class:"modal-header"},ut={class:"modal-title",id:"formModalLabel"},pt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),bt={class:"modal-body"},ft={class:"mb-3"},_t=t("label",{for:"title",class:"form-label"},"Title",-1),ht={class:"mb-3"},kt=t("label",{for:"tanggal",class:"form-label"},"Tanggal",-1),gt={class:"mb-3"},yt=t("label",{for:"bukti",class:"form-label"},"Bukti",-1),vt={class:"mb-3"},wt=t("label",{for:"type",class:"form-label"},"Jenis",-1),Ct=t("label",{for:"pemasukan"},"Pemasukan",-1),xt=t("label",{for:"pengeluaran"},"Pengeluaran",-1),Bt={class:"mb-3"},Mt=t("label",{for:"nominal",class:"form-label"},"Nominal",-1),Dt={class:"mb-3"},Et=t("label",{for:"keterangan",class:"form-label"},"Keterangan",-1),It={type:"submit",class:"btn btn-primary"};function Pt(o,l,c,n,B,M){const _=g("Head"),h=g("Pagination");return m(),u(w,null,[y(_,null,{default:P(()=>[F]),_:1}),t("div",T,[t("div",N,[t("div",L,[t("button",{class:"btn btn-primary",onClick:l[0]||(l[0]=(...a)=>n.openAddModal&&n.openAddModal(...a))},G),o.$page.props.auth.user.role==="bendahara"||o.$page.props.auth.user.role==="administrator"?(m(),u("a",K,J)):v("",!0)])]),t("div",Y,[t("div",q,[t("div",Q,[t("div",W,[t("div",X,[t("table",Z,[j,t("tbody",null,[(m(!0),u(w,null,U(c.jurnals.data,(a,e)=>(m(),u("tr",{key:e},[t("td",$,i(++e+(c.jurnals.current_page-1)*c.jurnals.per_page),1),t("td",null,i(a.title),1),t("td",null,i(new Date(a.date).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"})),1),t("td",null,[t("a",{href:`/storage/${a.bukti}`,target:"_blank"},"Lihat Bukti",8,tt)]),t("td",null,i(a.type==="debit"?n.formatCurrency(a.nominal):0),1),t("td",{class:V({"text-danger":a.type==="kredit"})},i(a.type==="kredit"?n.formatCurrency(a.nominal):0),3),t("td",null,i(n.formatCurrency(a.saldo)),1),o.$page.props.auth.user.role==="bendahara"||o.$page.props.auth.user.role==="administrator"?(m(),u("td",et,[t("button",{onClick:b(s=>n.openEditModal(a),["prevent"]),class:"btn btn-sm btn-primary border-0 me-2"},nt,8,at),t("button",{onClick:b(s=>n.destroy(a.id),["prevent"]),class:"btn btn-sm btn-danger border-0 me-2"},it,8,lt)])):v("",!0)]))),128))])])]),y(h,{links:c.jurnals.links,align:"end"},null,8,["links"])])])])])]),t("div",dt,[t("div",rt,[t("div",ct,[t("div",mt,[t("h5",ut,i(n.isEdit?"Edit Pencatatan":"Tambah Pencatatan"),1),pt]),t("div",bt,[t("form",{onSubmit:l[8]||(l[8]=b(a=>n.isEdit?n.update():n.submit(),["prevent"]))},[t("div",ft,[_t,r(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":l[1]||(l[1]=a=>n.form.title=a)},null,512),[[p,n.form.title]])]),t("div",ht,[kt,r(t("input",{type:"date",class:"form-control",id:"tanggal","onUpdate:modelValue":l[2]||(l[2]=a=>n.form.date=a)},null,512),[[p,n.form.date]])]),t("div",gt,[yt,t("input",{type:"file",class:"form-control",id:"bukti",onChange:l[3]||(l[3]=(...a)=>n.handleFileUpload&&n.handleFileUpload(...a))},null,32)]),t("div",vt,[wt,t("div",null,[r(t("input",{type:"radio",id:"pemasukan",value:"debit","onUpdate:modelValue":l[4]||(l[4]=a=>n.form.type=a)},null,512),[[C,n.form.type]]),Ct]),t("div",null,[r(t("input",{type:"radio",id:"pengeluaran",value:"kredit","onUpdate:modelValue":l[5]||(l[5]=a=>n.form.type=a)},null,512),[[C,n.form.type]]),xt])]),t("div",Bt,[Mt,r(t("input",{type:"text",class:"form-control",id:"nominal","onUpdate:modelValue":l[6]||(l[6]=a=>n.form.nominal=a)},null,512),[[p,n.form.nominal]])]),t("div",Dt,[Et,r(t("input",{type:"text",class:"form-control",id:"keterangan","onUpdate:modelValue":l[7]||(l[7]=a=>n.form.keterangan=a)},null,512),[[p,n.form.keterangan]])]),t("button",It,i(n.isEdit?"Update":"Simpan"),1)],32)])])])])],64)}const Tt=A(S,[["render",Pt]]);export{Tt as default};
