import{L as U}from"./User.6e6d62f5.js";import{M as F}from"./MemberCard.9e22adf6.js";import{H as w,L as C,r as k,a as v,o as i,c as d,b as c,w as p,d as e,t as b,g as m,i as o,F as E}from"./app.223d7d0c.js";import{S as u}from"./sweetalert2.all.1cc2398b.js";import{_ as x}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Footer.3daad491.js";const S={layout:U,components:{Head:w,Link:C,MemberCard:F},props:{errors:Object,session:Object,profile:Object,errors:Object,qrCode:String},setup(){const g=k(null),a=k("");return{fileInput:g,imageUrl:a,triggerFileInput:()=>{g.value.click()},updateImage:s=>{const l=s.target.files[0];if(!l)return;if(!["image/jpeg","image/png"].includes(l.type)){u.fire("Error","Format gambar harus JPG atau PNG.","error");return}if(l.size>2*1024*1024){u.fire("Error","Ukuran file maksimum adalah 2MB.","error");return}const f=new FileReader;f.onload=I=>{a.value=I.target.result},f.readAsDataURL(l)},cancelUpload:()=>{a.value=""},saveImage:async()=>{if(!a.value){console.log("Tidak ada gambar untuk disimpan."),u.fire("Error","Pilih gambar terlebih dahulu.","error");return}const s=new FormData,t=g.value.files[0];if(!t){console.log("File input kosong."),u.fire("Error","Pilih gambar terlebih dahulu.","error");return}s.append("image",t),console.log("Mengirim gambar ke server..."),(await fetch("/user/member-card/update",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:s})).ok?u.fire("Sukses","Foto kartu anggota berhasil diupdate.","success").then(()=>{window.location.href="/user/member-card"}):u.fire("Error","Gagal mengupdate foto kartu anggota.","error")}}}},D={class:"px-5 shadow padding"},L={id:"our-blog"},P={class:"padding_m card"},T={class:"row px-5 py-5"},j={key:0,class:"member-card"},A={class:"card-body"},G={class:"member-photo"},M=["src"],N={class:"valid-until"},B={class:"col-md-8"},H={class:"member-details"},O={class:"qr-code"},K=["innerHTML"],q={key:1,class:"member-default"},V={class:"col panduan-container ms-5"},R={class:"panduan-list"},z={class:"upload-btn-container"};function J(g,a,r,n,y,_){const s=v("Head"),l=v("fs-6");return i(),d(E,null,[c(s,null,{default:p(()=>[...a[4]||(a[4]=[e("title",null,"Kartu Anggota",-1)])]),_:1}),e("div",D,[a[19]||(a[19]=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("div",{class:"row"})])],-1)),e("section",L,[e("div",P,[e("div",T,[n.imageUrl&&r.profile?(i(),d("div",j,[e("div",A,[e("div",G,[e("img",{src:n.imageUrl,alt:"Kartu Anggota"},null,8,M)]),e("div",N,[a[5]||(a[5]=e("span",null,"Disahkan tanggal:",-1)),a[6]||(a[6]=e("br",null,null,-1)),e("strong",null,b(new Date(r.profile.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),1)]),e("div",B,[e("div",H,[e("strong",null,b(r.profile.name),1),a[7]||(a[7]=e("br",null,null,-1)),e("strong",null,b(r.profile.nomember),1)])]),e("div",O,[e("div",{innerHTML:r.qrCode},null,8,K)])])])):m("",!0),!n.imageUrl&&r.profile?(i(),d("div",q,[...a[8]||(a[8]=[e("img",{src:"/assets/images/editcard.png",alt:"Kartu Anggota"},null,-1)])])):m("",!0),e("div",V,[a[18]||(a[18]=e("h4",{class:"panduan-title"},"\u{1F4F8} Panduan Update Foto Kartu Anggota",-1)),e("ul",R,[a[13]||(a[13]=e("li",null,[e("i",{class:"fa fa-dot-circle-o panduan-icon"}),o(" Gunakan foto potret dengan background transparan dan pose badan sedikit condong ke bagian kanan. ")],-1)),a[14]||(a[14]=e("li",null,[e("i",{class:"fa fa-dot-circle-o panduan-icon"}),o(" Pastikan pencahayaan dan kualitas foto baik, gambar tidak blur. ")],-1)),e("li",null,[a[10]||(a[10]=e("i",{class:"fa fa-dot-circle-o panduan-icon"},null,-1)),c(l,null,{default:p(()=>[...a[9]||(a[9]=[o("Gunakan resolusi ",-1),e("strong",null," 450x575 pixel ",-1),o(" untuk foto yang Anda upload.",-1)])]),_:1})]),e("li",null,[a[12]||(a[12]=e("i",{class:"fa fa-dot-circle-o panduan-icon"},null,-1)),c(l,null,{default:p(()=>[...a[11]||(a[11]=[o(" Gunakan format ",-1),e("strong",null," PNG ",-1),o(" dengan ukuran file maksimum ",-1),e("strong",null,"2MB",-1),o(".",-1)])]),_:1})])]),e("div",z,[n.imageUrl?m("",!0):(i(),d("button",{key:0,onClick:a[0]||(a[0]=(...t)=>n.triggerFileInput&&n.triggerFileInput(...t)),class:"btn style-btn"},[...a[15]||(a[15]=[e("i",{class:"fa fa-upload"},null,-1),o(" Upload Foto ",-1)])])),e("input",{ref:"fileInput",type:"file",class:"file-input ms-3",onChange:a[1]||(a[1]=(...t)=>n.updateImage&&n.updateImage(...t)),accept:".jpg, .jpeg, .png"},null,544),n.imageUrl?(i(),d("button",{key:1,onClick:a[2]||(a[2]=(...t)=>n.saveImage&&n.saveImage(...t)),class:"btn style-btn"},[...a[16]||(a[16]=[e("i",{class:"fa fa-save"},null,-1),o(" Simpan ",-1)])])):m("",!0),n.imageUrl?(i(),d("button",{key:2,onClick:a[3]||(a[3]=(...t)=>n.cancelUpload&&n.cancelUpload(...t)),class:"btn style-btn ms-3"},[...a[17]||(a[17]=[e("i",{class:"fa fa-times"},null,-1),o(" Batal ",-1)])])):m("",!0)])])])])])])],64)}const $=x(S,[["render",J],["__scopeId","data-v-f997141b"]]);export{$ as default};
