import{L as B}from"./Admin.1127a308.js";import{P as A}from"./Pagination.6ba71aeb.js";import{H as L,L as I,u as U,r as w,z as j,a as g,o as r,c as u,b as x,w as D,d as t,t as a,f as C,h as T,F as f,j as S,v as M,k as p,i as h,g as N}from"./app.4ae09495.js";import{S as _}from"./sweetalert2.all.c9cc0cf4.js";import{_ as V}from"./_plugin-vue_export-helper.cdc0426e.js";const H={layout:B,components:{Head:L,Link:I,Pagination:A},props:{errors:Object,archive:Object,users:Array,datas:Array,refs:Array},setup(d){const i=U({archive_id:d.archive.id,user_id:[],allSelected:!1,status:d.archive.status,detail:d.archive.detail}),e=w(""),n=j(()=>d.refs.filter(s=>s.name.toLowerCase().includes(e.value.toLowerCase()))),k=()=>{i.user_id=i.allSelected?d.users.map(s=>s.id):[]},y=s=>{i.user_id.includes(s.id)||i.user_id.push(s.id),e.value=""},m=s=>{i.user_id=i.user_id.filter(l=>l!==s)},b=s=>d.refs.find(l=>l.id===s)||{name:"Unknown"},o=s=>{_.fire({title:"Apakah Anda yakin?",text:"Anda akan mengupdate disposisi ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(l=>{l.isConfirmed&&(p.Inertia.get(`/admin/archives/inbox/${s}/update`,{detail:i.detail,status:i.status}),_.fire({title:"Success!",text:"Status Approved!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},c=s=>{_.fire({title:"Apakah Anda yakin?",text:"Anda akan disposisi arsip ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Send it!"}).then(l=>{l.isConfirmed&&(p.Inertia.post(`/admin/archives/disposition/inbox/${s}`,{user_id:i.user_id}),_.fire({title:"Success!",text:"Status Sent!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},v=w(null);return{form:i,submitForm:o,submitDisposisi:c,selectAll:k,searchQuery:e,filteredRefs:n,addUser:y,removeUser:m,getUserById:b,selectedData:v,viewDetail:s=>{v.value=s,new bootstrap.Modal(document.getElementById("detailModal")).show()},getDocumentUrl:s=>`/storage/${s}`}}},P=t("title",null,"Hubungi Aspro",-1),F={class:"container-fluid padding px-5"},E={class:"row"},K={class:"col-md-12"},O=t("i",{class:"fa fa-arrow-left","aria-hidden":"true"},null,-1),Y=h(" Kembali"),z={class:"col-md-12"},J={class:"card border-0 shadow"},Q={class:"card-body"},R={class:"row"},q=t("h5",null,[t("i",{class:"fa fa-bookmark"}),h(" Data Pengirim")],-1),G=t("hr",null,null,-1),W={class:"table table-borderless"},X=t("th",null,"NIP",-1),Z=t("th",null,"Jabatan",-1),$=t("th",null,"Nama",-1),tt=t("th",null,"Instansi",-1),et=t("th",null,"Email",-1),st=t("th",null,"Status",-1),it=t("th",null,"Kontak",-1),at=t("th",null,"Title",-1),ot=t("th",null,"Detail",-1),nt=t("th",null,"Document",-1),lt=["href"],dt=t("i",{class:"fa fa-eye"},null,-1),ct=h("View"),rt=[dt,ct],ut={class:"row py-5"},ht=t("h5",null,[t("i",{class:"fa fa-bookmark"}),h("Tindaklanjuti")],-1),_t=t("hr",null,null,-1),mt={class:"col-md-3"},bt=t("label",{for:"status"},"Status",-1),vt=t("option",{selected:"",disabled:""},"Pilih Status",-1),ft=t("option",{value:"1",disabled:""},"Belum Ditindak lanjuti",-1),kt=t("option",{value:"3"},"Selesai",-1),yt=t("option",{value:"5"},"Tidak DItindaklanjuti",-1),wt=[vt,ft,kt,yt],gt={class:"col-md-4 col-sm-4"},xt=t("label",{for:"detail"},"Isi Disposisi",-1),Dt={class:"col-md-5 col-sm-5"},Ct=t("label",{for:"detail"},"Catatan dan Bukti Dukung",-1),St={class:"text-center mt-2"},pt={class:"row"},Bt={class:"col-md-8"},At=t("h5",null,[t("i",{class:"fa fa-bookmark"}),h(" Histori Disposisi")],-1),Lt=t("hr",null,null,-1),It={class:"table table-borderless"},Ut=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}}," No."),t("th",{class:"border-0"},"Disposisi"),t("th",{class:"border-0"},"Status"),t("th",{class:"border-0"},"Update"),t("th",{class:"border-0"},"Aksi")])],-1),jt={class:"fw-bold text-center"},Tt={class:"text-center"},Mt={class:"text-center"},Nt={class:"text-center"},Vt={key:0,class:"text-center"},Ht=["onClick"],Pt=t("i",{class:"fa fa-eye"},null,-1),Ft=[Pt],Et={class:"modal fade",id:"detailModal",tabindex:"-1","aria-labelledby":"detailModalLabel","aria-hidden":"true"},Kt={class:"modal-dialog modal-dialog-centered"},Ot={class:"modal-content"},Yt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"detailModalLabel"},"Detail Disposisi"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),zt={class:"modal-body"},Jt=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1);function Qt(d,i,e,n,k,y){const m=g("Head"),b=g("Link");return r(),u(f,null,[x(m,null,{default:D(()=>[P]),_:1}),t("div",F,[t("div",E,[t("div",K,[x(b,{href:"/admin/archives/inbox",class:"btn btn-md btn-primary border-0 shadow mb-3",type:"button"},{default:D(()=>[O,Y]),_:1})])]),t("div",z,[t("div",J,[t("div",Q,[t("div",R,[q,G,t("table",W,[t("tbody",null,[t("tr",null,[X,t("td",null,a(e.archive.archive.nip),1),Z,t("td",null,a(e.archive.archive.position),1)]),t("tr",null,[$,t("td",null,a(e.archive.archive.name),1),tt,t("td",null,a(e.archive.archive.agency),1)]),t("tr",null,[et,t("td",null,a(e.archive.archive.email),1),st,t("td",null,a(e.archive.archive.status==1?"Belum ditindaklanjuti":e.archive.archive.status==2?"Dalam proses":e.archive.archive.status==3?"Sudah selesai":e.archive.archive.status==4?"Telah didisposisi oleh administrator":"Tidak ditindak lanjuti"),1)]),t("tr",null,[it,t("td",null,a(e.archive.archive.contact),1),at,t("td",null,a(e.archive.archive.title),1)]),t("tr",null,[ot,t("td",null,a(e.archive.archive.detail),1),nt,t("td",null,[t("a",{class:"btn btn-sm btn-primary border-0 me-1","data-fancybox":"",href:n.getDocumentUrl(e.archive.document)},rt,8,lt)])])])])]),t("div",ut,[ht,_t,t("div",mt,[bt,C(t("select",{"onUpdate:modelValue":i[0]||(i[0]=o=>n.form.status=o),class:"form-control",id:"status"},wt,512),[[T,n.form.status]])]),t("div",gt,[xt,t("div",null,[t("div",null,[(r(!0),u(f,null,S(e.archive.isi.split(","),(o,c)=>(r(),u("span",{key:c,class:"badge bg-primary me-1"},a(o.trim()),1))),128))])])]),t("div",Dt,[Ct,C(t("textarea",{"onUpdate:modelValue":i[1]||(i[1]=o=>n.form.detail=o),class:"form-control",id:"detail",rows:"2"},null,512),[[M,n.form.detail]])]),t("div",St,[t("button",{class:"button btn-primary",style:{width:"300px"},onClick:i[2]||(i[2]=o=>n.submitForm(e.archive.id))},"Simpan")])]),t("div",pt,[t("div",Bt,[At,Lt,t("table",It,[Ut,t("tbody",null,[(r(!0),u(f,null,S(e.datas,(o,c)=>(r(),u("tr",{key:c},[t("td",jt,a(++c),1),t("td",Tt,a(o.user.name),1),t("td",Mt,a(o.status==1?"Belum ditindak lanjuti":"telah didisposisi ke "),1),t("td",Nt,a(new Date(o.updated_at).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})),1),o.status!="1"?(r(),u("td",Vt,[t("button",{class:"btn btn-sm btn-primary",onClick:v=>n.viewDetail(o)},Ft,8,Ht),t("div",Et,[t("div",Kt,[t("div",Ot,[Yt,t("div",zt,[t("p",null,a(n.selectedData&&n.selectedData.detail?n.selectedData.detail:"tidak diberikan keterangan"),1)]),Jt])])])])):N("",!0)]))),128))])])])])])])])])],64)}const te=V(H,[["render",Qt]]);export{te as default};
