import{L as x}from"./Admin.258a5e7f.js";import{H as A,L as S,u as D,a as b,o as r,c,b as k,w as v,d as t,t as o,f as C,y as w,F as m,j as y,k as u,r as j,i as d}from"./app.8cf303d7.js";import{S as l}from"./sweetalert2.all.1f1d4bfd.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const L={layout:x,components:{Head:A,Link:S},props:{errors:Object,archive:Object,users:Array,datas:Array},setup(h){const s=D({archive_id:h.archive.id,user_id:[],allSelected:!1});return{form:s,handleApprove:e=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan menyetujui usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(n=>{n.isConfirmed&&(u.Inertia.get(`/admin/registration/${e}/approve`,{info:s.info}),l.fire({title:"Success!",text:"Status Approved!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},handleReject:e=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan menolak usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Reject it!"}).then(n=>{n.isConfirmed&&(u.Inertia.get(`/admin/registration/${e}/reject`),l.fire({title:"Success!",text:"Status Rejected!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},handleConfirm:e=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan mengkonfirmasi ulang usulan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Confirm it!"}).then(n=>{n.isConfirmed&&(u.Inertia.get(`/admin/registration/${e}/confirm`,{info:s.info,email:s.sendemail}),l.fire({title:"Success!",text:"Status Conirmed!.",icon:"success",timer:2e3,showConfirmButton:!1}))}),j.showModalEmail=!1},sendEmail:e=>{l.fire({title:"Pastikan data sudah sesuai.!",text:"Anda akan mengirim email konfirmasi?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Send it!"}).then(n=>{n.isConfirmed&&(u.Inertia.get(`/admin/registration/${e}/email`),l.fire({title:"Success!",text:"Email Sent!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},submitDisposisi:e=>{l.fire({title:"Apakah Anda yakin?",text:"Anda akan disposisi arsip ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Send it!"}).then(n=>{n.isConfirmed&&(u.Inertia.post(`/admin/archives/disposition/${e}`,{user_id:s.user_id}),l.fire({title:"Success!",text:"Status Sent!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},selectAll:()=>{s.allSelected?s.user_id=h.users.map(e=>e.id):s.user_id=[]}}}},E=t("title",null,"Hubungi Aspro",-1),T={class:"container-fluid padding px-5"},H={class:"row"},N={class:"col-md-12"},V=t("i",{class:"fa fa-arrow-left","aria-hidden":"true"},null,-1),Y=d(" Kembali"),R={class:"card border-0 shadow"},P={class:"card-body"},U=t("h5",null,[t("i",{class:"fa fa-bookmark"}),d(" Data Pengirim")],-1),F=t("hr",null,null,-1),K={class:"table table-borderless"},M=t("th",null,"NIP",-1),O=t("th",null,"Jabatan",-1),J=t("th",null,"Nama",-1),q=t("th",null,"Instansi",-1),z=t("th",null,"Email",-1),G=t("th",null,"Status",-1),Q=t("th",null,"Kontak",-1),W={class:"row"},X={class:"card border-0 shadow mt-2 col-6"},Z={class:"card-body"},$=t("h5",null,[t("i",{class:"fa fa-bookmark"}),d(" Aksi")],-1),tt=t("hr",null,null,-1),et=d(" Disposisi ke "),st={class:"table table-borderless",style:{width:"50%"}},it={class:"border-0 rounded-start",style:{width:"5%"}},nt=t("th",{class:"border-0 rounded-start"}," Check All ",-1),ot=["id","value","checked"],at={class:"text-left"},lt=["for"],dt={class:"card border-0 shadow mt-2 col-6"},rt={class:"card-body"},ct=t("h5",null,[t("i",{class:"fa fa-bookmark"}),d(" Histori Disposisi")],-1),ut=t("hr",null,null,-1),ht={class:"table table-borderless"},mt=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),t("th",{class:"border-0"},"Disposisi"),t("th",{class:"border-0"},"Status"),t("th",{class:"border-0"},"Update")])],-1),_t={class:"fw-bold text-center"},ft={class:"text-center"},bt={class:"text-center"},kt={class:"text-center"},vt={class:"row"},Ct={class:"card border-0 shadow mt-2"},wt={class:"card-body"},yt=t("h5",null,[t("i",{class:"fa fa-bookmark"}),d(" Tindaklanjut")],-1),gt=t("hr",null,null,-1);function pt(h,s,i,a,g,p){const _=b("Head"),f=b("Link");return r(),c(m,null,[k(_,null,{default:v(()=>[E]),_:1}),t("div",T,[t("div",H,[t("div",N,[k(f,{href:"/admin/archives",class:"btn btn-md btn-primary border-0 shadow mb-3",type:"button"},{default:v(()=>[V,Y]),_:1}),t("div",R,[t("div",P,[U,F,t("table",K,[t("tbody",null,[t("tr",null,[M,t("td",null,o(i.archive.nip),1),O,t("td",null,o(i.archive.position),1)]),t("tr",null,[J,t("td",null,o(i.archive.name),1),q,t("td",null,o(i.archive.agency),1)]),t("tr",null,[z,t("td",null,o(i.archive.email),1),G,t("td",null,o(i.archive.status==1?"Belum ditindak lanjuti":"telah didisposisi ke "+i.archive.user_names),1)]),t("tr",null,[Q,t("td",null,o(i.archive.contact),1)])])])])])]),t("div",W,[t("div",X,[t("div",Z,[$,tt,et,t("div",null,[t("table",st,[t("tbody",null,[t("tr",null,[t("th",it,[C(t("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=e=>a.form.allSelected=e),onChange:s[1]||(s[1]=(...e)=>a.selectAll&&a.selectAll(...e))},null,544),[[w,a.form.allSelected]])]),nt]),(r(!0),c(m,null,y(i.users,(e,n)=>(r(),c("tr",{key:n},[t("td",null,[C(t("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=B=>a.form.user_id=B),id:e.id,value:e.id,checked:a.form.allSelected},null,8,ot),[[w,a.form.user_id]])]),t("td",at,[t("label",{class:"form-check-label",for:"user-"+e.id},o(e.name),9,lt)])]))),128))])])]),t("button",{onClick:s[3]||(s[3]=e=>a.submitDisposisi(i.archive.id)),class:"btn btn-primary mt-3"},"Disposisi")])]),t("div",dt,[t("div",rt,[ct,ut,t("table",ht,[mt,t("tbody",null,[(r(!0),c(m,null,y(i.datas,(e,n)=>(r(),c("tr",{key:n},[t("td",_t,o(++n+(i.datas.current_page-1)*i.datas.per_page),1),t("td",ft,o(e.user_id),1),t("td",bt,o(e.status==1?"Belum ditindak lanjuti":"telah didisposisi ke "),1),t("td",kt,o(new Date(e.updated_at).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})),1)]))),128))])])])])])]),t("div",vt,[t("div",Ct,[t("div",wt,[yt,gt,t("button",{onClick:s[4]||(s[4]=e=>a.submitDisposisi(i.archive.id)),class:"btn btn-primary mt-3"},"Disposisi")])])])])],64)}const Dt=I(L,[["render",pt]]);export{Dt as default};
