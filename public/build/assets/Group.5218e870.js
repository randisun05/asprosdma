import{L as C}from"./Website.2238837b.js";import{H as w,g as v,r as A,o as n,c,d as V,w as I,a as t,h as k,i as m,v as _,F as x,C as M,j as d,t as l,I as S,k as j,b as D,e as N}from"./app.6c2fc02c.js";import{S as U}from"./sweetalert2.all.2d29f515.js";import{_ as E}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Footer.4b8efebc.js";const L={layout:C,components:{Head:w},props:{errors:Object,session:Object},setup(){const r=v({agency:"",name:"",contact:"",email:"",total:"",file:"",captcha:"",term:""}),s=v([]),a=async()=>{try{const h=await(await fetch("https://api.sheety.co/6be80dfe79437b6dcf36a18e88b21c5b/permintaanNoSertifikat/instansi")).json();if(h&&h.instansi){const g=h.instansi.map(u=>u.namaInstansi.toLowerCase());s.splice(0,s.length,...g.filter(u=>u.includes(r.agency.toLowerCase())))}}catch(i){console.error("Error searching agencies:",i)}},e=i=>{r.agency=i,s.splice(0,s.length)},p=()=>{j.Inertia.post("/registration/group",{agency:r.agency,name:r.name,contact:r.contact,email:r.email,total:r.total,file:r.file,code:f.value,captcha:r.captcha,term:r.term},{onSuccess:()=>{U.fire({title:"Success!",text:"File Berhasil Dikirim.",icon:"success",showConfirmButton:!1,timer:2e3})}})},y=i=>{r.file=i.target.files[0]},f=v({value:o()});function o(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let h="";const g=i.length;for(let u=0;u<6;u++)h+=i.charAt(Math.floor(Math.random()*g));return h}return{form:r,submit:p,updateDocument:y,refreshCaptcha:()=>{f.value=o()},code:f,searchResults:s,searchAgencies:a,selectAgency:e}}},B=t("title",null,"Registrasi Keanggotaan Aspro",-1),P=D('<section class="page-header parallaxie padding_top center-block"><div class="container"><div class="row"><div class="col-sm-12"><div class="page-titles text-center"><h2 class="whitecolor font-light bottom30"></h2><ul class="breadcrumb justify-content-center"><li class="breadcrumb-item"><h3> Registrasi Anggota Kolektif</h3></li><li class="breadcrumb-item active" aria-current="page"></li></ul></div></div></div></div></section>',1),R={id:"registration",class:""},T={class:"container"},F={class:"row d-flex justify-content-center"},H={class:"col-lg-12 col-md-12 col-sm-10"},K={class:"logincontainer"},z={class:"row"},J={class:"col-md-6 col-sm-6"},O=t("label",{for:"agency",class:"ms-4"},"Instansi",-1),G={class:"form-group bottom35 mt-1"},W={key:0,class:"list-group",style:{position:"absolute",width:"100%","z-index":"999","overflow-y":"auto","max-height":"200px"}},q={class:"col-md-4 col-sm-4"},Q=["onClick"],X={key:1,class:"alert alert-danger mt-2"},Y={class:"col-md-6 col-sm-6"},Z=t("span",{class:"ms-4"}," Nama PIC ",-1),$={class:"form-group bottom35 mt-1"},tt={key:0,class:"alert alert-danger mt-2"},et={class:"col-md-6 col-sm-6"},st=t("span",{class:"ms-4"}," Kontak Aktif PIC ",-1),ot={class:"form-group bottom35 mt-1"},at={key:0,class:"alert alert-danger mt-2"},rt={class:"col-md-6 col-sm-6"},nt=t("span",{class:"ms-4"}," Email Aktif PIC ",-1),ct={class:"form-group bottom35 mt-1"},lt={key:0,class:"alert alert-danger mt-2"},it={class:"col-md-6 col-sm-6"},dt=t("span",{class:"ms-4"}," Jumlah Data ",-1),mt={class:"form-group bottom35 mt-1"},ht={key:0,class:"alert alert-danger mt-2"},ut={class:"col-md-6 col-sm-6"},_t=t("span",{class:"ms-4"},[N(" File "),t("a",{href:"/assets/excel/register_group.xlsx",class:"text-center mt-4",target:"_blank"},[t("u",null,"( Unduh Template Excel )")])],-1),ft={class:"form-group bottom35 mt-1"},gt={class:"input-group"},vt={key:0,class:"alert alert-danger mt-2"},pt={key:1,class:"alert alert-danger mt-2"},yt={class:"col-md-5 col-sm-5 ms-2 me-5"},bt=t("label",{class:"form-check-label ms-2",for:"agreeTerms"}," Semua yang diusulkan menyetujui peraturan organisasi. ",-1),kt={key:0,class:"col-md-4 alert-danger mt-2"},xt={class:"col-md-3 col-sm-3 ms-5"},Ct={class:"form-group bottom35"},wt={class:"form-group mb-4"},At={class:"input-group"},Vt={class:"text px-5",id:"generated-captcha"},It=t("i",{class:"fa fa-undo"},null,-1),Mt=[It],St={class:"col-md-3 col-sm-2"},jt={class:"form-group"},Dt={class:"input-group"},Nt={key:0,class:"alert alert-danger mt-2"},Ut=t("div",{class:"row d-flex justify-content-center"},[t("button",{type:"submit",class:"button btnprimary",style:{width:"300px"}},"Submit")],-1);function Et(r,s,a,e,p,y){const f=A("Head");return n(),c(x,null,[V(f,null,{default:I(()=>[B]),_:1}),P,t("section",R,[t("div",T,[t("div",F,[t("div",H,[t("div",K,[t("form",{onSubmit:s[10]||(s[10]=k((...o)=>e.submit&&e.submit(...o),["prevent"])),class:"getin_form border-form",id:"login"},[t("div",z,[t("div",J,[O,t("div",G,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=o=>e.form.agency=o),onInput:s[1]||(s[1]=(...o)=>e.searchAgencies&&e.searchAgencies(...o)),placeholder:"Masukkan nama instansi"},null,544),[[_,e.form.agency]]),e.form.agency&&e.searchResults.length?(n(),c("ul",W,[t("div",q,[(n(!0),c(x,null,M(e.searchResults,(o,b)=>(n(),c("li",{class:"list-group-item",key:b,onClick:i=>e.selectAgency(o)},l(o),9,Q))),128))])])):d("",!0),a.errors.agency?(n(),c("div",X,l(a.errors.agency),1)):d("",!0)])]),t("div",Y,[Z,t("div",$,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>e.form.name=o),placeholder:"Masukan Nama PIC"},null,512),[[_,e.form.name]]),a.errors.name?(n(),c("div",tt,l(a.errors.name),1)):d("",!0)])]),t("div",et,[st,t("div",ot,[m(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=o=>e.form.contact=o),placeholder:"Masukan Kontak Aktif",maxlength:"13",onkeypress:"return event.charCode >= 48 && event.charCode <= 57"},null,512),[[_,e.form.contact]]),a.errors.contact?(n(),c("div",at,l(a.errors.contact),1)):d("",!0)])]),t("div",rt,[nt,t("div",ct,[m(t("input",{type:"email",class:"form-control","onUpdate:modelValue":s[4]||(s[4]=o=>e.form.email=o),placeholder:"Masukan Email Aktif PIC"},null,512),[[_,e.form.email]]),a.errors.email?(n(),c("div",lt,l(a.errors.email),1)):d("",!0)])]),t("div",it,[dt,t("div",mt,[m(t("input",{type:"number",class:"form-control","onUpdate:modelValue":s[5]||(s[5]=o=>e.form.total=o),placeholder:"Masukan Jumlah Data",onkeypress:"return event.charCode >= 48 && event.charCode <= 57"},null,512),[[_,e.form.total]]),a.errors.agency?(n(),c("div",ht,l(a.errors.total),1)):d("",!0)])]),t("div",ut,[_t,t("div",ft,[t("div",gt,[t("input",{type:"file",class:"form-control",onChange:s[6]||(s[6]=(...o)=>e.updateDocument&&e.updateDocument(...o)),accept:".xls, .xlsx,"},null,32)]),a.errors.file?(n(),c("div",vt,l(a.errors.file),1)):d("",!0),a.errors[0]?(n(),c("div",pt,l(a.errors[0]),1)):d("",!0)])]),t("div",yt,[m(t("input",{class:"form-check-input",type:"checkbox",id:"agreeTerms","onUpdate:modelValue":s[7]||(s[7]=o=>e.form.term=o),"true-value":"1","false-value":"0"},null,512),[[S,e.form.term]]),bt,a.errors.term?(n(),c("div",kt,l(a.errors.term),1)):d("",!0)]),t("div",xt,[t("div",Ct,[t("div",wt,[t("div",At,[t("span",Vt,l(e.code.value),1),t("button",{class:"btn btn btn-outline-primary no-border",style:{"border-color":"white"},onClick:s[8]||(s[8]=k((...o)=>e.refreshCaptcha&&e.refreshCaptcha(...o),["prevent"]))},Mt)])])])]),t("div",St,[t("div",jt,[t("div",Dt,[m(t("input",{type:"text",class:"form-control me-3",id:"captcha","onUpdate:modelValue":s[9]||(s[9]=o=>e.form.captcha=o),placeholder:"Enter Captcha",size:"6"},null,512),[[_,e.form.captcha]])]),a.errors.captcha?(n(),c("div",Nt,l(a.errors.captcha),1)):d("",!0)])]),Ut])],32)])])])])])],64)}const Ft=E(L,[["render",Et]]);export{Ft as default};
