import{L as E}from"./Admin.2da35360.js";import{P}from"./Pagination.04851fc2.js";import{H as D,r as h,a as k,o as c,c as m,b as g,w as I,d as t,g as v,F as y,j as U,t as l,e as p,f as d,v as u,N as w,k as b,n as V,i as x}from"./app.2b5e9737.js";import{S as i}from"./sweetalert2.all.1ce9a222.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const S={layout:E,components:{Head:D,Pagination:P},props:{errors:Object,jurnals:Object},setup(){const a=h({title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}),n=h(!1);return{form:a,isEdit:n,handleFileUpload:e=>{a.value.bukti=e.target.files[0]},openAddModal:()=>{n.value=!1,a.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""},new bootstrap.Modal(document.getElementById("formModal")).show()},openEditModal:e=>{n.value=!0,a.value={id:e.id,title:e.title,date:e.date,bukti:null,nominal:e.nominal,type:e.type,keterangan:e.keterangan},new bootstrap.Modal(document.getElementById("formModal")).show()},submit:()=>{const e=new FormData;e.append("title",a.value.title),e.append("date",a.value.date||a.value.date),e.append("bukti",a.value.bukti),e.append("type",a.value.type),e.append("nominal",a.value.nominal),e.append("keterangan",a.value.keterangan),b.Inertia.post("/admin/jurnals/",e,{onError:s=>{console.error("Validation errors:",s),i.fire({title:"Error!",text:"Gagal menyimpan data. Periksa kembali input Anda.",icon:"error",timer:3e3,showConfirmButton:!1})},onSuccess:()=>{i.fire({title:"Success!",text:"Data berhasil disimpan.",icon:"success",timer:2e3,showConfirmButton:!1});const s=bootstrap.Modal.getInstance(document.getElementById("formModal"));s&&s.hide(),a.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}}})},update:()=>{if(!a.value.id){console.error("ID is missing in form data."),i.fire({title:"Error!",text:"ID tidak ditemukan. Tidak dapat memperbarui data.",icon:"error",timer:3e3,showConfirmButton:!1});return}const e=new FormData;e.append("title",a.value.title),e.append("date",a.value.date),e.append("type",a.value.type),e.append("nominal",a.value.nominal),e.append("keterangan",a.value.keterangan),a.value.bukti&&e.append("bukti",a.value.bukti),e.append("_method","PUT"),b.Inertia.post(`/admin/jurnals/${a.value.id}`,e,{forceFormData:!0,onError:s=>{console.error("Validation errors:",s),i.fire({title:"Error!",text:"Gagal memperbarui data. Periksa kembali input Anda.",icon:"error",timer:3e3,showConfirmButton:!1})},onSuccess:()=>{i.fire({title:"Success!",text:"Data berhasil diperbarui.",icon:"success",timer:2e3,showConfirmButton:!1});const s=bootstrap.Modal.getInstance(document.getElementById("formModal"));s&&s.hide(),a.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}}})},destroy:e=>{i.fire({title:"Apakah Anda yakin?",text:"Anda tidak akan dapat mengembalikan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&(b.Inertia.delete(`/admin/jurnals/${e}`),i.fire({title:"Deleted!",text:"Pencatatan Berhasil Dihapus!.",icon:"success",timer:2e3,showConfirmButton:!1}))})}}}},T=t("title",null,"Pencatatan",-1),F={class:"px-5 shadow padding"},N={class:"row"},L={class:"col-md-12 mb-3"},H=t("i",{class:"fa fa-plus-circle"},null,-1),G=x("Tambah"),K=[H,G],O={key:0,href:"/admin/jurnals/export",class:"btn btn-success ms-2"},R=t("i",{class:"fa fa-excel"},null,-1),z=x(" Report"),J=[R,z],Y={class:"row mt-1"},q={class:"col-md-12"},Q={class:"card border-0 shadow"},W={class:"card-body"},X={class:"table-responsive"},Z={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},j=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),t("th",{class:"border-0"},"Keterangan"),t("th",{class:"border-0"},"Tanggal"),t("th",{class:"border-0"},"Bukti"),t("th",{class:"border-0"},"Pemasukan"),t("th",{class:"border-0"},"Pengeluaran"),t("th",{class:"border-0"},"Saldo"),t("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1),$={class:"fw-bold text-center"},tt=["href"],et={key:0,class:"text-center"},at=["onClick"],ot=t("i",{class:"fa fa-pencil",title:"edit"},null,-1),nt=[ot],st=["onClick"],lt=t("i",{class:"fa fa-trash",title:"hapus"},null,-1),it=[lt],dt={class:"modal fade",id:"formModal",tabindex:"-1","aria-labelledby":"formModalLabel","aria-hidden":"true"},rt={class:"modal-dialog modal-dialog-centered"},ct={class:"modal-content"},mt={class:"modal-header"},ut={class:"modal-title",id:"formModalLabel"},pt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),bt={class:"modal-body"},ft={class:"mb-3"},_t=t("label",{for:"title",class:"form-label"},"Title",-1),ht={class:"mb-3"},kt=t("label",{for:"tanggal",class:"form-label"},"Tanggal",-1),gt={class:"mb-3"},vt=t("label",{for:"bukti",class:"form-label"},"Bukti",-1),yt={class:"mb-3"},wt=t("label",{for:"type",class:"form-label"},"Jenis",-1),xt=t("label",{for:"pemasukan"},"Pemasukan",-1),Bt=t("label",{for:"pengeluaran"},"Pengeluaran",-1),Ct={class:"mb-3"},Mt=t("label",{for:"nominal",class:"form-label"},"Nominal",-1),Et={class:"mb-3"},Pt=t("label",{for:"keterangan",class:"form-label"},"Keterangan",-1),Dt={type:"submit",class:"btn btn-primary"};function It(a,n,r,o,B,C){const f=k("Head"),_=k("Pagination");return c(),m(y,null,[g(f,null,{default:I(()=>[T]),_:1}),t("div",F,[t("div",N,[t("div",L,[t("button",{class:"btn btn-primary",onClick:n[0]||(n[0]=(...e)=>o.openAddModal&&o.openAddModal(...e))},K),a.$page.props.auth.user.role==="bendahara"||a.$page.props.auth.user.role==="administrator"?(c(),m("a",O,J)):v("",!0)])]),t("div",Y,[t("div",q,[t("div",Q,[t("div",W,[t("div",X,[t("table",Z,[j,t("tbody",null,[(c(!0),m(y,null,U(r.jurnals.data,(e,s)=>(c(),m("tr",{key:s},[t("td",$,l(++s+(r.jurnals.current_page-1)*r.jurnals.per_page),1),t("td",null,l(e.title),1),t("td",null,l(e.date),1),t("td",null,[t("a",{href:`/storage/${e.bukti}`,target:"_blank"},"Lihat Bukti",8,tt)]),t("td",null,l(e.type==="debit"?e.nominal:0),1),t("td",{class:V({"text-danger":e.type==="kredit"})},l(e.type==="kredit"?e.nominal:0),3),t("td",null,l(e.saldo),1),a.$page.props.auth.user.role==="bendahara"||a.$page.props.auth.user.role==="administrator"?(c(),m("td",et,[t("button",{onClick:p(M=>o.openEditModal(e),["prevent"]),class:"btn btn-sm btn-primary border-0 me-2"},nt,8,at),t("button",{onClick:p(M=>o.destroy(e.id),["prevent"]),class:"btn btn-sm btn-danger border-0 me-2"},it,8,st)])):v("",!0)]))),128))])])]),g(_,{links:r.jurnals.links,align:"end"},null,8,["links"])])])])])]),t("div",dt,[t("div",rt,[t("div",ct,[t("div",mt,[t("h5",ut,l(o.isEdit?"Edit Pencatatan":"Tambah Pencatatan"),1),pt]),t("div",bt,[t("form",{onSubmit:n[8]||(n[8]=p(e=>o.isEdit?o.update():o.submit(),["prevent"]))},[t("div",ft,[_t,d(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":n[1]||(n[1]=e=>o.form.title=e)},null,512),[[u,o.form.title]])]),t("div",ht,[kt,d(t("input",{type:"date",class:"form-control",id:"tanggal","onUpdate:modelValue":n[2]||(n[2]=e=>o.form.date=e)},null,512),[[u,o.form.date]])]),t("div",gt,[vt,t("input",{type:"file",class:"form-control",id:"bukti",onChange:n[3]||(n[3]=(...e)=>o.handleFileUpload&&o.handleFileUpload(...e))},null,32)]),t("div",yt,[wt,t("div",null,[d(t("input",{type:"radio",id:"pemasukan",value:"debit","onUpdate:modelValue":n[4]||(n[4]=e=>o.form.type=e)},null,512),[[w,o.form.type]]),xt]),t("div",null,[d(t("input",{type:"radio",id:"pengeluaran",value:"kredit","onUpdate:modelValue":n[5]||(n[5]=e=>o.form.type=e)},null,512),[[w,o.form.type]]),Bt])]),t("div",Ct,[Mt,d(t("input",{type:"text",class:"form-control",id:"nominal","onUpdate:modelValue":n[6]||(n[6]=e=>o.form.nominal=e)},null,512),[[u,o.form.nominal]])]),t("div",Et,[Pt,d(t("input",{type:"text",class:"form-control",id:"keterangan","onUpdate:modelValue":n[7]||(n[7]=e=>o.form.keterangan=e)},null,512),[[u,o.form.keterangan]])]),t("button",Dt,l(o.isEdit?"Update":"Simpan"),1)],32)])])])])],64)}const Ft=A(S,[["render",It]]);export{Ft as default};
