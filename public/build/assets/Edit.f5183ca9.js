import{L as U}from"./User.39cb3750.js";import{M as w}from"./MemberCard.b63f7540.js";import{H as F,L as S,r as b,a as k,o as c,c as u,b as f,w as p,d as e,t as h,g as m,F as C,p as E,l as x,i as s}from"./app.fef7de74.js";import{S as _}from"./sweetalert2.all.e1c257ed.js";import{_ as D}from"./_plugin-vue_export-helper.cdc0426e.js";import"./Footer.5b61e854.js";const L={layout:U,components:{Head:F,Link:S,MemberCard:w},props:{errors:Object,session:Object,profile:Object,errors:Object,qrCode:String},setup(){const i=b(null),o=b("");return{fileInput:i,imageUrl:o,triggerFileInput:()=>{i.value.click()},updateImage:d=>{const l=d.target.files[0];if(!l)return;if(!["image/jpeg","image/png"].includes(l.type)){_.fire("Error","Format gambar harus JPG atau PNG.","error");return}if(l.size>2*1024*1024){_.fire("Error","Ukuran file maksimum adalah 2MB.","error");return}const g=new FileReader;g.onload=I=>{o.value=I.target.result},g.readAsDataURL(l)},cancelUpload:()=>{o.value=""},saveImage:async()=>{if(!o.value){console.log("Tidak ada gambar untuk disimpan."),_.fire("Error","Pilih gambar terlebih dahulu.","error");return}const d=new FormData,n=i.value.files[0];if(!n){console.log("File input kosong."),_.fire("Error","Pilih gambar terlebih dahulu.","error");return}d.append("image",n),console.log("Mengirim gambar ke server..."),(await fetch("/user/member-card/update",{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:d})).ok?_.fire("Sukses","Foto kartu anggota berhasil diupdate.","success").then(()=>{window.location.href="/user/member-card"}):_.fire("Error","Gagal mengupdate foto kartu anggota.","error")}}}},t=i=>(E("data-v-f997141b"),i=i(),x(),i),P=t(()=>e("title",null,"Kartu Anggota",-1)),T={class:"px-5 shadow padding"},j=t(()=>e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("div",{class:"row"})])],-1)),A={id:"our-blog"},G={class:"padding_m card"},M={class:"row px-5 py-5"},N={key:0,class:"member-card"},B={class:"card-body"},H={class:"member-photo"},O=["src"],K={class:"valid-until"},q=t(()=>e("span",null,"Disahkan tanggal:",-1)),V=t(()=>e("br",null,null,-1)),R={class:"col-md-8"},z={class:"member-details"},J=t(()=>e("br",null,null,-1)),X={class:"qr-code"},Q=["innerHTML"],W={key:1,class:"member-default"},Y=["src"],Z={class:"col panduan-container ms-5"},$=t(()=>e("h4",{class:"panduan-title"},"\u{1F4F8} Panduan Update Foto Kartu Anggota",-1)),ee={class:"panduan-list"},te=t(()=>e("li",null,[e("i",{class:"fa fa-dot-circle-o panduan-icon"}),s(" Gunakan foto potret dengan background transparan dan pose badan sedikit condong ke bagian kanan. ")],-1)),ae=t(()=>e("li",null,[e("i",{class:"fa fa-dot-circle-o panduan-icon"}),s(" Pastikan pencahayaan dan kualitas foto baik, gambar tidak blur. ")],-1)),oe=t(()=>e("i",{class:"fa fa-dot-circle-o panduan-icon"},null,-1)),ne=s("Gunakan resolusi "),se=t(()=>e("strong",null," 450x575 pixel ",-1)),ie=s(" untuk foto yang Anda upload."),le=t(()=>e("i",{class:"fa fa-dot-circle-o panduan-icon"},null,-1)),re=s(" Gunakan format "),de=t(()=>e("strong",null," PNG ",-1)),ce=s(" dengan ukuran file maksimum "),ue=t(()=>e("strong",null,"2MB",-1)),_e=s("."),me={class:"upload-btn-container"},ge=t(()=>e("i",{class:"fa fa-upload"},null,-1)),fe=s(" Upload Foto "),pe=[ge,fe],he=t(()=>e("i",{class:"fa fa-save"},null,-1)),be=s(" Simpan "),ke=[he,be],ve=t(()=>e("i",{class:"fa fa-times"},null,-1)),ye=s(" Batal "),Ie=[ve,ye];function Ue(i,o,r,a,v,y){const d=k("Head"),l=k("fs-6");return c(),u(C,null,[f(d,null,{default:p(()=>[P]),_:1}),e("div",T,[j,e("section",A,[e("div",G,[e("div",M,[a.imageUrl&&r.profile?(c(),u("div",N,[e("div",B,[e("div",H,[e("img",{src:a.imageUrl,alt:"Kartu Anggota"},null,8,O)]),e("div",K,[q,V,e("strong",null,h(new Date(r.profile.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})),1)]),e("div",R,[e("div",z,[e("strong",null,h(r.profile.name),1),J,e("strong",null,h(r.profile.nomember),1)])]),e("div",X,[e("div",{innerHTML:r.qrCode},null,8,Q)])])])):m("",!0),!a.imageUrl&&r.profile?(c(),u("div",W,[e("img",{src:"/assets/images/editcard.png",alt:"Kartu Anggota"},null,8,Y)])):m("",!0),e("div",Z,[$,e("ul",ee,[te,ae,e("li",null,[oe,f(l,null,{default:p(()=>[ne,se,ie]),_:1})]),e("li",null,[le,f(l,null,{default:p(()=>[re,de,ce,ue,_e]),_:1})])]),e("div",me,[a.imageUrl?m("",!0):(c(),u("button",{key:0,onClick:o[0]||(o[0]=(...n)=>a.triggerFileInput&&a.triggerFileInput(...n)),class:"btn style-btn"},pe)),e("input",{ref:"fileInput",type:"file",class:"file-input ms-3",onChange:o[1]||(o[1]=(...n)=>a.updateImage&&a.updateImage(...n)),accept:".jpg, .jpeg, .png"},null,544),a.imageUrl?(c(),u("button",{key:1,onClick:o[2]||(o[2]=(...n)=>a.saveImage&&a.saveImage(...n)),class:"btn style-btn"},ke)):m("",!0),a.imageUrl?(c(),u("button",{key:2,onClick:o[3]||(o[3]=(...n)=>a.cancelUpload&&a.cancelUpload(...n)),class:"btn style-btn ms-3"},Ie)):m("",!0)])])])])])])],64)}const De=D(L,[["render",Ue],["__scopeId","data-v-f997141b"]]);export{De as default};
