import{L as D}from"./Admin.69c9e5a1.js";import{P as E}from"./Pagination.a10de99e.js";import{H as I,r as y,a as v,o as u,c as p,b as h,w as P,d as t,i as w,g as C,F as M,j as U,t as r,e as f,f as d,v as b,M as _,k as c,n as V}from"./app.4cb6840a.js";import{S as i}from"./sweetalert2.all.1cd5f157.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";const S={layout:D,components:{Head:I,Pagination:E},props:{errors:Object,jurnals:Object},setup(){const n=y({title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}),e=y(!1);return{form:n,isEdit:e,handleFileUpload:a=>{n.value.bukti=a.target.files[0]},openAddModal:()=>{e.value=!1,n.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""},new bootstrap.Modal(document.getElementById("formModal")).show()},openEditModal:a=>{e.value=!0,n.value={id:a.id,title:a.title,date:a.date,bukti:null,nominal:a.nominal,type:a.type,keterangan:a.keterangan},new bootstrap.Modal(document.getElementById("formModal")).show()},submit:()=>{const a=new FormData;a.append("title",n.value.title),a.append("date",n.value.date||n.value.date),a.append("bukti",n.value.bukti),a.append("type",n.value.type),a.append("nominal",n.value.nominal),a.append("keterangan",n.value.keterangan),c.Inertia.post("/admin/jurnals/",a,{onError:s=>{console.error("Validation errors:",s),i.fire({title:"Error!",text:"Gagal menyimpan data. Periksa kembali input Anda.",icon:"error",timer:3e3,showConfirmButton:!1})},onSuccess:()=>{i.fire({title:"Success!",text:"Data berhasil disimpan.",icon:"success",timer:2e3,showConfirmButton:!1});const s=bootstrap.Modal.getInstance(document.getElementById("formModal"));s&&s.hide(),n.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}}})},update:()=>{if(!n.value.id){console.error("ID is missing in form data."),i.fire({title:"Error!",text:"ID tidak ditemukan. Tidak dapat memperbarui data.",icon:"error",timer:3e3,showConfirmButton:!1});return}const a=new FormData;a.append("title",n.value.title),a.append("date",n.value.date),a.append("type",n.value.type),a.append("nominal",n.value.nominal),a.append("keterangan",n.value.keterangan),n.value.bukti&&a.append("bukti",n.value.bukti),a.append("_method","PUT"),c.Inertia.post(`/admin/jurnals/${n.value.id}`,a,{forceFormData:!0,onError:s=>{console.error("Validation errors:",s),i.fire({title:"Error!",text:"Gagal memperbarui data. Periksa kembali input Anda.",icon:"error",timer:3e3,showConfirmButton:!1})},onSuccess:()=>{i.fire({title:"Success!",text:"Data berhasil diperbarui.",icon:"success",timer:2e3,showConfirmButton:!1});const s=bootstrap.Modal.getInstance(document.getElementById("formModal"));s&&s.hide(),n.value={title:"",date:"",bukti:null,nominal:"",type:"",keterangan:""}}})},destroy:a=>{i.fire({title:"Apakah Anda yakin?",text:"Anda tidak akan dapat mengembalikan ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&(c.Inertia.delete(`/admin/jurnals/${a}`),i.fire({title:"Deleted!",text:"Pencatatan Berhasil Dihapus!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},formatCurrency:a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(a)}}},F={class:"px-5 shadow padding"},T={class:"row"},L={class:"col-md-12 mb-3"},N={key:0,href:"/admin/jurnals/export",class:"btn btn-success ms-2"},H={class:"row mt-1"},R={class:"col-md-12"},G={class:"card border-0 shadow"},K={class:"card-body"},O={class:"table-responsive"},z={class:"table table-bordered table-centered table-nowrap mb-0 rounded"},J={class:"fw-bold text-center"},Y=["href"],q={key:0,class:"text-center"},Q=["onClick"],W=["onClick"],X={class:"modal fade",id:"formModal",tabindex:"-1","aria-labelledby":"formModalLabel","aria-hidden":"true"},Z={class:"modal-dialog modal-dialog-centered"},j={class:"modal-content"},$={class:"modal-header"},tt={class:"modal-title",id:"formModalLabel"},et={class:"modal-body"},at={class:"mb-3"},ot={class:"mb-3"},nt={class:"mb-3"},lt={class:"mb-3"},st={class:"mb-3"},rt={class:"mb-3"},it={type:"submit",class:"btn btn-primary"};function dt(n,e,m,l,x,B){const k=v("Head"),g=v("Pagination");return u(),p(M,null,[h(k,null,{default:P(()=>[...e[9]||(e[9]=[t("title",null,"Pencatatan",-1)])]),_:1}),t("div",F,[t("div",T,[t("div",L,[t("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...o)=>l.openAddModal&&l.openAddModal(...o))},[...e[10]||(e[10]=[t("i",{class:"fa fa-plus-circle"},null,-1),w("Tambah",-1)])]),n.$page.props.auth.user.role==="bendahara"||n.$page.props.auth.user.role==="administrator"?(u(),p("a",N,[...e[11]||(e[11]=[t("i",{class:"fa fa-excel"},null,-1),w(" Report",-1)])])):C("",!0)])]),t("div",H,[t("div",R,[t("div",G,[t("div",K,[t("div",O,[t("table",z,[e[14]||(e[14]=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}},"No."),t("th",{class:"border-0"},"Keterangan"),t("th",{class:"border-0"},"Tanggal"),t("th",{class:"border-0"},"Bukti"),t("th",{class:"border-0"},"Pemasukan"),t("th",{class:"border-0"},"Pengeluaran"),t("th",{class:"border-0"},"Saldo"),t("th",{class:"border-0 rounded-end",style:{width:"12%"}},"Aksi")])],-1)),t("tbody",null,[(u(!0),p(M,null,U(m.jurnals.data,(o,a)=>(u(),p("tr",{key:a},[t("td",J,r(++a+(m.jurnals.current_page-1)*m.jurnals.per_page),1),t("td",null,r(o.title),1),t("td",null,r(new Date(o.date).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"2-digit"})),1),t("td",null,[t("a",{href:`/storage/${o.bukti}`,target:"_blank"},"Lihat Bukti",8,Y)]),t("td",null,r(o.type==="debit"?l.formatCurrency(o.nominal):0),1),t("td",{class:V({"text-danger":o.type==="kredit"})},r(o.type==="kredit"?l.formatCurrency(o.nominal):0),3),t("td",null,r(l.formatCurrency(o.saldo)),1),n.$page.props.auth.user.role==="bendahara"||n.$page.props.auth.user.role==="administrator"?(u(),p("td",q,[t("button",{onClick:f(s=>l.openEditModal(o),["prevent"]),class:"btn btn-sm btn-primary border-0 me-2"},[...e[12]||(e[12]=[t("i",{class:"fa fa-pencil",title:"edit"},null,-1)])],8,Q),t("button",{onClick:f(s=>l.destroy(o.id),["prevent"]),class:"btn btn-sm btn-danger border-0 me-2"},[...e[13]||(e[13]=[t("i",{class:"fa fa-trash",title:"hapus"},null,-1)])],8,W)])):C("",!0)]))),128))])])]),h(g,{links:m.jurnals.links,align:"end"},null,8,["links"])])])])])]),t("div",X,[t("div",Z,[t("div",j,[t("div",$,[t("h5",tt,r(l.isEdit?"Edit Pencatatan":"Tambah Pencatatan"),1),e[15]||(e[15]=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),t("div",et,[t("form",{onSubmit:e[8]||(e[8]=f(o=>l.isEdit?l.update():l.submit(),["prevent"]))},[t("div",at,[e[16]||(e[16]=t("label",{for:"title",class:"form-label"},"Title",-1)),d(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=o=>l.form.title=o)},null,512),[[b,l.form.title]])]),t("div",ot,[e[17]||(e[17]=t("label",{for:"tanggal",class:"form-label"},"Tanggal",-1)),d(t("input",{type:"date",class:"form-control",id:"tanggal","onUpdate:modelValue":e[2]||(e[2]=o=>l.form.date=o)},null,512),[[b,l.form.date]])]),t("div",nt,[e[18]||(e[18]=t("label",{for:"bukti",class:"form-label"},"Bukti",-1)),t("input",{type:"file",class:"form-control",id:"bukti",onChange:e[3]||(e[3]=(...o)=>l.handleFileUpload&&l.handleFileUpload(...o))},null,32)]),t("div",lt,[e[21]||(e[21]=t("label",{for:"type",class:"form-label"},"Jenis",-1)),t("div",null,[d(t("input",{type:"radio",id:"pemasukan",value:"debit","onUpdate:modelValue":e[4]||(e[4]=o=>l.form.type=o)},null,512),[[_,l.form.type]]),e[19]||(e[19]=t("label",{for:"pemasukan"},"Pemasukan",-1))]),t("div",null,[d(t("input",{type:"radio",id:"pengeluaran",value:"kredit","onUpdate:modelValue":e[5]||(e[5]=o=>l.form.type=o)},null,512),[[_,l.form.type]]),e[20]||(e[20]=t("label",{for:"pengeluaran"},"Pengeluaran",-1))])]),t("div",st,[e[22]||(e[22]=t("label",{for:"nominal",class:"form-label"},"Nominal",-1)),d(t("input",{type:"text",class:"form-control",id:"nominal","onUpdate:modelValue":e[6]||(e[6]=o=>l.form.nominal=o)},null,512),[[b,l.form.nominal]])]),t("div",rt,[e[23]||(e[23]=t("label",{for:"keterangan",class:"form-label"},"Keterangan",-1)),d(t("input",{type:"text",class:"form-control",id:"keterangan","onUpdate:modelValue":e[7]||(e[7]=o=>l.form.keterangan=o)},null,512),[[b,l.form.keterangan]])]),t("button",it,r(l.isEdit?"Update":"Simpan"),1)],32)])])])])],64)}const ct=A(S,[["render",dt]]);export{ct as default};
