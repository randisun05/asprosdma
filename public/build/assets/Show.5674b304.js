import{L as B}from"./Admin.cd2f1065.js";import{H as A,L as T,q as L,r as C,x as H,a as w,o,c as d,b as D,w as S,d as t,i as m,t as n,f as h,u as I,F as k,j as v,g,v as V,k as K}from"./app.0f2c29db.js";import{S as j}from"./sweetalert2.all.8c8d2521.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";const N={layout:B,components:{Head:A,Link:T},props:{errors:Object,archive:Object,users:Array,datas:Array,refs:Array},setup(b){const l=L({archive_id:b.archive.id,user_id:[],allSelected:!1,isi:[]}),i=C(""),e=H(()=>b.refs.filter(a=>a.name.toLowerCase().includes(i.value.toLowerCase()))),p=()=>{l.user_id=l.allSelected?b.users.map(a=>a.id):[]},x=a=>{l.user_id.includes(a.id)||l.user_id.push(a.id),i.value=""},c=a=>{l.user_id=l.user_id.filter(u=>u!==a)},y=a=>b.refs.find(u=>u.id===a)||{name:"Unknown"},s=a=>{j.fire({title:"Apakah Anda yakin?",text:"Anda akan disposisi arsip ini!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Send it!"}).then(u=>{u.isConfirmed&&(K.Inertia.post(`/admin/archives/disposition/${a}`,{user_id:l.user_id,isi:l.isi}),j.fire({title:"Success!",text:"Status Sent!.",icon:"success",timer:2e3,showConfirmButton:!1}))})},r=C(null);return{form:l,submitDisposisi:s,selectAll:p,searchQuery:i,filteredRefs:e,addUser:x,removeUser:c,getUserById:y,viewDetail:a=>{r.value=a,new bootstrap.Modal(document.getElementById("detailModal")).show()},selectedData:r,getDocumentUrl:a=>`/storage/${a}`,updateIsi:a=>{const u=a.target;u.checked?l.isi.push(u.value):l.isi=l.isi.filter(U=>U!==u.value)}}}},P={class:"container-fluid padding px-5"},R={class:"row"},F={class:"col-md-12"},Q={class:"col-md-12"},E={class:"card border-0 shadow"},O={class:"card-body"},W={class:"row"},q={class:"table table-borderless"},z=["href"],J={class:"row"},Y={class:"col-md-3"},G={key:0,class:"table table-borderless",style:{width:"50%"}},X={class:"border-0 rounded-start",style:{width:"5%"}},Z=["id","value","checked"],_={class:"text-left"},$=["for"],tt={key:1,class:"mt-2"},lt={class:"list-group"},st=["onClick"],et={class:"mt-2"},it=["onClick"],at={class:"col-3"},nt={class:"row",style:{"font-size":"13px"}},ot={class:"col-6"},dt={class:"col-6"},rt={class:"col-6"},ut={class:"table table-borderless"},mt={class:"fw-bold text-center"},bt={class:"text-center"},kt={class:"text-center"},ft={key:0,class:"text-center"},vt=["onClick"],ct={class:"modal fade",id:"detailModal",tabindex:"-1","aria-labelledby":"detailModalLabel","aria-hidden":"true"},yt={class:"modal-dialog modal-dialog-centered"},ht={class:"modal-content"},gt={class:"modal-body"};function pt(b,l,i,e,p,x){const c=w("Head"),y=w("Link");return o(),d(k,null,[D(c,null,{default:S(()=>[...l[17]||(l[17]=[t("title",null,"Hubungi Aspro",-1)])]),_:1}),t("div",P,[t("div",R,[t("div",F,[D(y,{href:"/admin/archives",class:"btn btn-md btn-primary border-0 shadow mb-3",type:"button"},{default:S(()=>[...l[18]||(l[18]=[t("i",{class:"fa fa-arrow-left","aria-hidden":"true"},null,-1),m(" Kembali",-1)])]),_:1})]),t("div",Q,[t("div",E,[t("div",O,[t("div",W,[l[30]||(l[30]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),m(" Data Pengirim")],-1)),l[31]||(l[31]=t("hr",null,null,-1)),t("table",q,[t("tbody",null,[t("tr",null,[l[19]||(l[19]=t("th",null,"NIP",-1)),t("td",null,n(i.archive.nip),1),l[20]||(l[20]=t("th",null,"Jabatan",-1)),t("td",null,n(i.archive.position),1)]),t("tr",null,[l[21]||(l[21]=t("th",null,"Nama",-1)),t("td",null,n(i.archive.name),1),l[22]||(l[22]=t("th",null,"Instansi",-1)),t("td",null,n(i.archive.agency),1)]),t("tr",null,[l[23]||(l[23]=t("th",null,"Email",-1)),t("td",null,n(i.archive.email),1),l[24]||(l[24]=t("th",null,"Status",-1)),t("td",null,n(i.archive.status==1?"Belum ditindak lanjuti":i.archive.status==2?"Dalam proses":i.archive.status==3?"Selesai":i.archive.status==4?"Telah didisposisi ke "+i.archive.user_names:"Tidak ditindak lanjuti"),1)]),t("tr",null,[l[25]||(l[25]=t("th",null,"Kontak",-1)),t("td",null,n(i.archive.contact),1),l[26]||(l[26]=t("th",null,"Title",-1)),t("td",null,n(i.archive.title),1)]),t("tr",null,[l[28]||(l[28]=t("th",null,"Detail",-1)),t("td",null,n(i.archive.detail),1),l[29]||(l[29]=t("th",null,"Document",-1)),t("td",null,[t("a",{class:"btn btn-sm btn-primary border-0 me-1","data-fancybox":"",href:e.getDocumentUrl(i.archive.document)},[...l[27]||(l[27]=[t("i",{class:"fa fa-eye"},null,-1),m("View",-1)])],8,z)])])])])]),t("div",J,[t("div",Y,[l[34]||(l[34]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),m(" Disposisi")],-1)),l[35]||(l[35]=t("hr",null,null,-1)),l[36]||(l[36]=m(" Disposisi ke ",-1)),t("div",null,[i.users&&i.users.length>0?(o(),d("table",G,[t("tbody",null,[t("tr",null,[t("th",X,[h(t("input",{type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=s=>e.form.allSelected=s),onChange:l[1]||(l[1]=(...s)=>e.selectAll&&e.selectAll(...s))},null,544),[[I,e.form.allSelected]])]),l[32]||(l[32]=m()),l[33]||(l[33]=t("th",{class:"border-0 rounded-start"}," Check All ",-1))]),(o(!0),d(k,null,v(i.users,(s,r)=>(o(),d("tr",{key:r},[t("td",null,[h(t("input",{type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=f=>e.form.user_id=f),id:s.id,value:s.id,checked:e.form.allSelected},null,8,Z),[[I,e.form.user_id]])]),t("td",_,[t("label",{class:"form-check-label",for:"user-"+s.id},n(s.name),9,$)])]))),128))])])):g("",!0),h(t("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=s=>e.searchQuery=s),placeholder:"Cari nama...",class:"form-control",onInput:l[4]||(l[4]=(...s)=>b.searchRefs&&b.searchRefs(...s))},null,544),[[V,e.searchQuery]]),e.searchQuery&&e.filteredRefs.length?(o(),d("div",tt,[t("ul",lt,[(o(!0),d(k,null,v(e.filteredRefs,s=>(o(),d("li",{key:s.id,class:"list-group-item",onClick:r=>e.addUser(s)},n(s.name),9,st))),128))])])):g("",!0),t("div",et,[(o(!0),d(k,null,v(e.form.user_id,(s,r)=>(o(),d("span",{key:r,class:"badge bg-primary me-2"},[m(n(e.getUserById(s).name)+" ",1),t("span",{onClick:f=>e.removeUser(s),class:"ms-1 text-white",style:{cursor:"pointer"}},"\xD7",8,it)]))),128))])]),t("button",{onClick:l[5]||(l[5]=s=>e.submitDisposisi(i.archive.id)),class:"btn btn-primary mt-3"},"Disposisi")]),t("div",at,[l[48]||(l[48]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),m("Isi Disposisi")],-1)),l[49]||(l[49]=t("hr",null,null,-1)),t("div",nt,[t("div",ot,[t("div",null,[t("input",{type:"checkbox",id:"status1",value:"Selesaikan/Tindaklanjuti",onChange:l[6]||(l[6]=s=>e.updateIsi(s))},null,32),l[37]||(l[37]=t("label",{class:"form-check-label",for:"status1"},"Selesaikan/Tindaklanjuti",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status2",value:"Siapkan bahan",onChange:l[7]||(l[7]=s=>e.updateIsi(s))},null,32),l[38]||(l[38]=t("label",{class:"form-check-label",for:"status2"},"Siapkan bahan",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status3",value:"Buat konsep jawaban",onChange:l[8]||(l[8]=s=>e.updateIsi(s))},null,32),l[39]||(l[39]=t("label",{class:"form-check-label",for:"status3"},"Buat konsep jawaban",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status4",value:"Koodinasikan",onChange:l[9]||(l[9]=s=>e.updateIsi(s))},null,32),l[40]||(l[40]=t("label",{class:"form-check-label",for:"status4"},"Koodinasikan",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status5",value:"Pelajari/Kaji",onChange:l[10]||(l[10]=s=>e.updateIsi(s))},null,32),l[41]||(l[41]=t("label",{class:"form-check-label",for:"status5"},"Pelajari/Kaji",-1))])]),t("div",dt,[t("div",null,[t("input",{type:"checkbox",id:"status6",value:"Untuk diketahui",onChange:l[11]||(l[11]=s=>e.updateIsi(s))},null,32),l[42]||(l[42]=t("label",{class:"form-check-label",for:"status6"},"Untuk diketahui",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status7",value:"Wakil/Hadiri",onChange:l[12]||(l[12]=s=>e.updateIsi(s))},null,32),l[43]||(l[43]=t("label",{class:"form-check-label",for:"status7"},"Wakil/Hadiri",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status8",value:"Untuk menjadi perhatian",onChange:l[13]||(l[13]=s=>e.updateIsi(s))},null,32),l[44]||(l[44]=t("label",{class:"form-check-label",for:"status8"},"Untuk menjadi perhatian",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status9",value:"Pantau",onChange:l[14]||(l[14]=s=>e.updateIsi(s))},null,32),l[45]||(l[45]=t("label",{class:"form-check-label",for:"status9"},"Pantau",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status10",value:"Temui Saya",onChange:l[15]||(l[15]=s=>e.updateIsi(s))},null,32),l[46]||(l[46]=t("label",{class:"form-check-label",for:"status10"},"Temui Saya",-1))]),t("div",null,[t("input",{type:"checkbox",id:"status11",value:"File/Simpan",onChange:l[16]||(l[16]=s=>e.updateIsi(s))},null,32),l[47]||(l[47]=t("label",{class:"form-check-label",for:"status11"},"File/Simpan",-1))])])])]),t("div",rt,[l[54]||(l[54]=t("h5",null,[t("i",{class:"fa fa-bookmark"}),m("Histori Disposisi")],-1)),l[55]||(l[55]=t("hr",null,null,-1)),t("table",ut,[l[53]||(l[53]=t("thead",{class:"thead-dark"},[t("tr",{class:"border-0 text-center"},[t("th",{class:"border-0 rounded-start",style:{width:"5%"}}," No."),t("th",{class:"border-0"},"Disposisi"),t("th",{class:"border-0"},"Status"),t("th",{class:"border-0"},"Aksi")])],-1)),t("tbody",null,[(o(!0),d(k,null,v(i.datas,(s,r)=>(o(),d("tr",{key:r},[t("td",mt,n(++r),1),t("td",bt,n(s.user.name),1),t("td",kt,n(s.status==1?"Belum ditindaklanjuti":s.status==2?"Dalam proses":s.status==3?"Selesai":s.status==4?"Telah didisposisi ke "+s.user_names:"Tidak ditindak lanjuti"),1),s.status!="1"?(o(),d("td",ft,[t("button",{class:"btn btn-sm btn-primary",onClick:f=>e.viewDetail(s)},[...l[50]||(l[50]=[t("i",{class:"fa fa-eye"},null,-1)])],8,vt),t("div",ct,[t("div",yt,[t("div",ht,[l[51]||(l[51]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"detailModalLabel"},"Keterangan"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",gt,[t("p",null,n(e.selectedData&&e.selectedData.detail?e.selectedData.detail:"tidak diberikan keterangan"),1)]),l[52]||(l[52]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])])):g("",!0)]))),128))])])])])])])])])])],64)}const jt=M(N,[["render",pt]]);export{jt as default};
